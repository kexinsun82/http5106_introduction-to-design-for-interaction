/*! For license information please see main.7f8e34d582fc8793fe37.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,function(e,t,n){"use strict";n.r(t),n.d(t,"set",(function(){return o})),n.d(t,"lmsType",(function(){return r})),n.d(t,"baseUrl",(function(){return i})),n.d(t,"clientId",(function(){return s})),n.d(t,"courseId",(function(){return c})),n.d(t,"lti13Id",(function(){return l}));var a={lmsType:null,baseUrl:null,clientId:null,courseId:null,lti13Id:null};function o(e){a=e}function r(){return a.lmsType}function i(){return a.baseUrl}function s(){return a.clientId}function c(){return a.courseId}function l(){return a.lti13Id}},,,function(e,t,n){"use strict";function a(e){return null!=e}function o(e,t){return a(e)?e:t}function r(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=0,o=e;n<o.length;n++){var r=(0,o[n])();if(a(r))return r}return null}function i(e,t){return a(e)?t(e):null}n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return r})),n.d(t,"d",(function(){return i}))},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return _e})),n.d(t,"b",(function(){return Ee}));n(114),n(115),n(116);var a=n(1),o=n(7),r=(n(117),n(118)),i=n(119),s=n(120),c=n(121),l=n(122),u=n(123),p=n(124),f=n(125),d=n(126),m=n(127),v=n(128),b=n(129),g=n(130),h=n(131),y=n(132),A=n(133),T=n(134),w=n(135),I=n(136),x=n(137),E=n(138),N=n(139),R=n(140);Object(a.a)(Object(a.a)(Object(a.a)(Object(a.a)(Object(a.a)(Object(a.a)(Object(a.a)(Object(a.a)(Object(a.a)(Object(a.a)(Object(a.a)(Object(a.a)(Object(a.a)(Object(a.a)(Object(a.a)(Object(a.a)(Object(a.a)(Object(a.a)(Object(a.a)(Object(a.a)(Object(a.a)(Object(a.a)(Object(a.a)({},_(r,"application/msword")),_(i,"application/vnd.openxmlformats-officedocument.wordprocessingml.document")),_(s,"application/vnd.oasis.opendocument.presentation")),_(c,"application/vnd.oasis.opendocument.spreadsheet")),_(l,"application/vnd.oasis.opendocument.text")),_(u,"application/pdf")),_(p,"application/vnd.ms-powerpoint","application/x-mspowerpoint","application/x-powerpoint")),_(f,"application/vnd.openxmlformats-officedocument.presentationml.presentation","application/vnd.openxmlformats-officedocument.presentationml.slideshow","application/vnd.openxmlformats-officedocument.presentationml.template")),_(d,"application/x-shockwave-flash")),_(m,"application/vnd.ms-excel")),_(v,"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.openxmlformats-officedocument.spreadsheetml.template")),_(b,"application/tar","application/x-archive","application/x-tar","application/zip")),_(g,"audio/mp3")),_(h,"audio/wav")),_(y,"image/gif")),_(A,"image/jpeg","image/pjpeg")),_(T,"image/png")),_(w,"image/svg","image/svg+xml")),_(I,"image/tiff")),_(x,"application/xhtml+xml","text/html")),_(E,"application/rtf","text/rtf")),_(N,"text/plain")),_(R,"video/mp4"));function _(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var a={};return t.forEach((function(t){return a[t]=e})),a}n(141);var F=n(142),L=n(143),O=n(69),S=n(144),k=n(145),C=n(70),U=n(71),j=n(146),G=n(147),P=n(72);Object(a.a)(Object(a.a)(Object(a.a)(Object(a.a)(Object(a.a)(Object(a.a)(Object(a.a)(Object(a.a)(Object(a.a)(Object(a.a)({},M(F,"audio/mp3","audio/wav")),M(L,"application/tar","application/x-archive","application/x-tar","application/zip")),M(O,"application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document")),M(S,"application/xhtml+xml","text/html")),M(k,"image/gif","image/jpeg","image/pjpeg","image/png","image/svg","image/svg+xml","image/tiff")),M(C,"application/pdf")),M(U,"application/vnd.ms-powerpoint","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/vnd.openxmlformats-officedocument.presentationml.slideshow","application/vnd.openxmlformats-officedocument.presentationml.template","application/vnd.oasis.opendocument.presentation","application/x-mspowerpoint","application/x-powerpoint")),M(j,"application/vnd.oasis.opendocument.text","application/rtf","text/plain","text/rtf")),M(G,"application/x-shockwave-flash","video/mp4")),M(P,"application/x-announcement","application/x-assignment","application/x-book","application/x-book-chapter","application/x-discussion-topic","application/x-document","application/x-file","application/x-folder","application/x-forum","application/x-glossary","application/x-glossary-entry","application/x-html-block","application/x-label","application/x-item","application/x-learning-module","application/x-lesson","application/x-lesson-description","application/x-lesson-page","application/x-link-discussion-topic","application/x-link-web","application/x-lti-launch","application/x-module","application/x-page","application/x-page-content","application/x-page-intro","application/x-section","application/x-quiz","application/x-syllabus"));function M(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var a={};return t.forEach((function(t){return a[t]=e})),a}n(148),n(149),n(150),n(151),n(152);var D=n(153),$=(n(154),n(155),n(156),n(157),n(158),n(159),n(160),n(161),n(3)),H=n(33),B=n(0),V=n(48),z=n(26),W=n(13),J=n(65),K=n(66),Y=n(64),Z=n(79);function q(e){var t=parseInt(o.c(e,""),10);return isNaN(t)?null:t}n(162);var X,Q=function(){function e(){}return e.getQueryStringParam=function(e,t){return new URLSearchParams(e).get(t)},e}(),ee=function(){function e(){}return e.getAllyBaseUrl=function(e){var t=""!==e.port?":"+e.port:"";return e.protocol+"//"+e.hostname+t},e.getLaunchPresentationBaseUrl=function(e){return Q.getQueryStringParam(e.search,"launchPresentationBaseUrl")},e.isRunningInIframe=function(e){try{return e.self!==e.top}catch(e){return!0}},e.getClientId=function(e){var t=e.pathname.split("/")[2];return Object(o.b)(q(t))?t:Q.getQueryStringParam(e.search,"clientId")},e}(),te=n(251),ne=n(248),ae=n(29);!function(){function e(){}e.createLazyReplaySubject=function(e,t){var n=new te.a(1),a=!1,r=!1;return{next:function(e){r||n.next(e)},observable$:Object(ne.a)((function(){return a||(a=!0,Object(ae.a)(e()).subscribe((function(e){return n.next(e)}),(function(e){r=!0,o.b(t)?t(e):console.error(e)}))),n})),refresh:function(){return a?r?Promise.reject(new Error("Refusing to refresh subject due to previous failure")):new Promise((function(a){var i=Object(ae.a)(e()).subscribe((function(e){i.unsubscribe(),n.next(e),a()}),(function(e){i.unsubscribe(),r=!0,o.b(t)?t(e):console.error(e),a()}))})):Promise.resolve()}}}}();function oe(e){var t=[];return e.forEach((function(e){o.b(e)&&t.push(e)})),t}!function(e){e[e.asc=1]="asc",e[e.desc=-1]="desc"}(X||(X={}));var re={"en-US":"en","en-US-pro":"en","eu-ES":"eu","nn-NO":"nn","pt-BR":"pt"},ie={ar:"ar-SA-u-ca-islamic"},se=function(){function e(){}return e.getNumberFormatter=function(e,t){var n={style:t};try{return new Intl.NumberFormat(this.getLocaleAlternative(e),n)}catch(n){var a=e.split("-");return a.length>1?(a.pop(),this.getNumberFormatter(a.join("-"),t)):this.getNumberFormatter("en-US",t)}},e.resolveAllySupportedLanguage=function(e,t,n){var a=o.a(this.getRequestParamLang(t),this.getBrowserLang(n));if(o.b(a)){var r=this.toBcp47(a,!0);if(-1!==e.indexOf(r))return r;var i=r.split("-")[0];if(-1!==e.indexOf(i))return i;for(var s=0,c=e;s<c.length;s++){var l=c[s];if(l.startsWith(i+"-"))return l}}return null},e.resolveAngularSupportedLocaleId=function(e,t,n){var a=o.a(this.getRequestParamLang(t),this.getBrowserLang(n)),r=this.resolveAllySupportedLanguage(e,t,n);if(o.b(a)&&o.b(r)){var i=this.toBcp47(a,!0),s=re[i];return o.b(s)?s:this.toKnownAngularLocale(i)}return null},e.toBcp47=function(e,t){return this.transformRawLocaleStr(e,"-",(function(e){return e.toLowerCase()}),(function(e){return e.toUpperCase()}),(function(e){return t?e:null}))},e.getLocaleAlternative=function(e){var t=ie[e];return void 0===t?e:t},e.transformRawLocaleStr=function(e,t,n,a,r){var i=e.split(/[-_]/),s=n(i[0]),c=i.length>1?a(i[1]):null;return oe([s,c,o.b(c)&&i.length>2?r(i[2]):null]).join(t)},e.getRequestParamLang=function(e){return function(){var t=/[?&]locale=([^&]+)/.exec(e.search);return o.b(t)&&o.b(t[1])?t[1]:null}},e.getBrowserLang=function(e){return function(){return e.languages.length>0?e.languages[0]:o.b(e.language)?e.language:null}},e.toKnownAngularLocale=function(e){if(-1!==this.angularSupportedLocales.indexOf(e))return e;if(-1!==e.indexOf("-")){var t=e.split("-");return t.pop(),this.toKnownAngularLocale(t.join("-"))}return"en"},e.angularSupportedLocales=n(163).map((function(t){return e.toBcp47(t,!0)})),e}(),ce=n(46),le=function(){function e(e){var t=this;this.router=e,this.canAutoFocus=!0,this.router.events.pipe(Object(ce.a)((function(e){return e instanceof W.b}))).subscribe((function(){return t.canAutoFocus=!0}))}return e.ctorParameters=function(){return[{type:W.c}]},e=Object(a.c)([Object(B.E)({providedIn:"root"})],e)}(),ue=function(){function e(e,t){this.autoFocusService=e,this.elementRef=t,this.autoFocus=new B.x,e.canAutoFocus?(e.canAutoFocus=!1,this.canAutoFocus=!0):this.canAutoFocus=!1}return e.prototype.ngAfterContentInit=function(){this.canAutoFocus&&(this.elementRef.nativeElement.focus(),this.autoFocus.next(void 0))},e.prototype.ngOnDestroy=function(){this.autoFocusService.canAutoFocus=!0},e.ctorParameters=function(){return[{type:le},{type:B.v}]},e.propDecorators={autoFocus:[{type:B.T}]},e=Object(a.c)([Object(B.u)({host:{tabindex:"-1"},selector:"[autoFocus]"})],e)}(),pe=n(75),fe=n.n(pe),de=function(){function e(){this.icon=D}return e.propDecorators={title:[{type:B.H}]},e=Object(a.c)([Object(B.n)({selector:"loading",template:fe.a})],e)}(),me=n(76),ve=n.n(me),be=function(){function e(){this.icon=D}return e.propDecorators={title:[{type:B.H}]},e=Object(a.c)([Object(B.n)({selector:"loading-no-focus",template:ve.a})],e)}(),ge=n(77),he=n.n(ge),ye=function(){function e(){}return e.propDecorators={iconSrc:[{type:B.H}],iconMessage:[{type:B.H}]},e=Object(a.c)([Object(B.n)({encapsulation:B.sb.None,selector:"note",template:he.a})],e)}(),Ae=function(){function e(){this.clickPreventDefault=new B.x}return e.prototype.clicked=function(e){e.preventDefault(),this.clickPreventDefault.emit(e)},e.prototype.spacePressed=function(e){e.preventDefault(),this.clickPreventDefault.emit(e)},e.propDecorators={clickPreventDefault:[{type:B.T,args:["click.preventDefault"]}],clicked:[{type:B.A,args:["click",["$event"]]}],spacePressed:[{type:B.A,args:["keydown.space",["$event"]]}]},e=Object(a.c)([Object(B.u)({selector:"[click.preventDefault]"})],e)}(),Te=function(){function e(){}return e.prototype.transform=function(e){var t=document.createElement("textarea");return t.innerHTML=e,t.value},e=Object(a.c)([Object(B.X)({name:"htmlDecode"})],e)}(),we=function(){function e(e){this.formatters={default:se.getNumberFormatter(e),percent:se.getNumberFormatter(e,"percent")}}return e.prototype.transform=function(e,t){return isNaN(e)?e:"percent"===t?this.formatters.percent.format(e):this.formatters.default.format(e)},e.ctorParameters=function(){return[{type:String,decorators:[{type:B.C,args:[B.K]}]}]},e=Object(a.c)([Object(B.X)({name:"numberFormat"})],e)}(),Ie=new B.F("AllyBaseUrl"),xe=new B.F("LmsBaseUrl"),Ee=new B.F("Window"),Ne=ee.getAllyBaseUrl(window.location),Re=ee.getLaunchPresentationBaseUrl(window.location),_e=function(){function e(){}return e=Object(a.c)([Object(B.M)({declarations:[ue,Ae,de,be,ye,Te,we],exports:[Y.a,ue,z.a,Ae,V.a,H.b,de,be,$.b,ye,Te,we,K.a,J.a],imports:[Y.a,Z.a.forRoot(),$.b,K.a,J.a,W.d.forRoot([],{useHash:!0})],providers:[{provide:Ie,useValue:Ne},{provide:xe,useValue:Re},{provide:Ee,useValue:window},Te,we]})],e)}();n(164),n(165),n(166),n(167),n(168),n(169),n(170),n(171),n(172),n(173),n(174),n(175),n(176),n(177),n(178),n(179),n(180),n(181),n(182),n(183),n(184),n(185),n(186),n(187),n(188),n(189),n(190),n(191);new B.F("AllyClientContextService"),new B.F("AllyCourseContextService"),n(51),n(50),n(49)},,,function(e,t,n){var a;!function(t){"use strict";function n(){}var o=n.prototype,r=t.EventEmitter;function i(e,t){for(var n=e.length;n--;)if(e[n].listener===t)return n;return-1}function s(e){return function(){return this[e].apply(this,arguments)}}function c(e){return"function"==typeof e||e instanceof RegExp||!(!e||"object"!=typeof e)&&c(e.listener)}o.getListeners=function(e){var t,n,a=this._getEvents();if(e instanceof RegExp)for(n in t={},a)a.hasOwnProperty(n)&&e.test(n)&&(t[n]=a[n]);else t=a[e]||(a[e]=[]);return t},o.flattenListeners=function(e){var t,n=[];for(t=0;t<e.length;t+=1)n.push(e[t].listener);return n},o.getListenersAsObject=function(e){var t,n=this.getListeners(e);return n instanceof Array&&((t={})[e]=n),t||n},o.addListener=function(e,t){if(!c(t))throw new TypeError("listener must be a function");var n,a=this.getListenersAsObject(e),o="object"==typeof t;for(n in a)a.hasOwnProperty(n)&&-1===i(a[n],t)&&a[n].push(o?t:{listener:t,once:!1});return this},o.on=s("addListener"),o.addOnceListener=function(e,t){return this.addListener(e,{listener:t,once:!0})},o.once=s("addOnceListener"),o.defineEvent=function(e){return this.getListeners(e),this},o.defineEvents=function(e){for(var t=0;t<e.length;t+=1)this.defineEvent(e[t]);return this},o.removeListener=function(e,t){var n,a,o=this.getListenersAsObject(e);for(a in o)o.hasOwnProperty(a)&&-1!==(n=i(o[a],t))&&o[a].splice(n,1);return this},o.off=s("removeListener"),o.addListeners=function(e,t){return this.manipulateListeners(!1,e,t)},o.removeListeners=function(e,t){return this.manipulateListeners(!0,e,t)},o.manipulateListeners=function(e,t,n){var a,o,r=e?this.removeListener:this.addListener,i=e?this.removeListeners:this.addListeners;if("object"!=typeof t||t instanceof RegExp)for(a=n.length;a--;)r.call(this,t,n[a]);else for(a in t)t.hasOwnProperty(a)&&(o=t[a])&&("function"==typeof o?r.call(this,a,o):i.call(this,a,o));return this},o.removeEvent=function(e){var t,n=typeof e,a=this._getEvents();if("string"===n)delete a[e];else if(e instanceof RegExp)for(t in a)a.hasOwnProperty(t)&&e.test(t)&&delete a[t];else delete this._events;return this},o.removeAllListeners=s("removeEvent"),o.emitEvent=function(e,t){var n,a,o,r,i=this.getListenersAsObject(e);for(r in i)if(i.hasOwnProperty(r))for(n=i[r].slice(0),o=0;o<n.length;o++)!0===(a=n[o]).once&&this.removeListener(e,a.listener),a.listener.apply(this,t||[])===this._getOnceReturnValue()&&this.removeListener(e,a.listener);return this},o.trigger=s("emitEvent"),o.emit=function(e){var t=Array.prototype.slice.call(arguments,1);return this.emitEvent(e,t)},o.setOnceReturnValue=function(e){return this._onceReturnValue=e,this},o._getOnceReturnValue=function(){return!this.hasOwnProperty("_onceReturnValue")||this._onceReturnValue},o._getEvents=function(){return this._events||(this._events={})},n.noConflict=function(){return t.EventEmitter=r,n},void 0===(a=function(){return n}.apply(t,[]))||(e.exports=a)}(this||{})},,,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n(1),o=n(0),r=function(){function e(){}return e.prototype.appendScript=function(e){var t="ally-eesysoft-integration-script";e.querySelectorAll("."+t).forEach((function(e){return e.remove()}));var n=document.createElement("script");n.innerHTML="\n    window.addEventListener(\"message\", function(e) {\n        if(e.data.eesysoftloader !== undefined) {\n            var __eesyEng = document.createElement('script');\n            __eesyEng.src = e.data.eesysoftloader;\n            __eesyEng.async = true;\n            __eesyEng.type = 'text/javascript';\n\n            var __element = document.getElementsByTagName('script')[0];\n            __element.parentNode.insertBefore(__eesyEng, __element);\n        }\n    }, false);\n\n    window.parent.postMessage({\n        messageName: \"lti.ready\",\n        supportTab: \"true\"\n    }, '*');\n",n.classList.add(t),e.appendChild(n)},e=Object(a.c)([Object(o.E)({providedIn:"root"})],e)}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(1),o=n(0),r=n(41),i=function(){function e(e){var t=this;this.window=e,this.iframeCallbacks=[],e.addEventListener("message",(function(e){var n=t.parseMessage(e.data);n&&t.iframeCallbacks.forEach((function(e){e(n)}))}))}return e.prototype.postReplacedFileMessage=function(e,t){this.postIFrameMessage("replaceFile",{newFile:t,oldFileId:e})},e.prototype.postFixHtmlIssueMessage=function(e,t,n){this.postIFrameMessage("fixHtmlIssue",{fixOptions:n,locators:t,ruleName:e})},e.prototype.postEventTrackerMessage=function(e,t){this.postIFrameMessage("eventTracker",{event:e,data:t})},e.prototype.postDownloadReadyMessage=function(e){this.postIFrameMessage("downloadReady",e)},e.prototype.postAlternativeFormatAccessedMessage=function(e){this.postIFrameMessage("alternativeFormatAccessed",e)},e.prototype.postPrintMessage=function(){this.postIFrameMessage("print")},e.prototype.postIFrameMessage=function(e,t){void 0===t&&(t={});var n={data:t,id:e+" + '-' + "+Math.floor(1e6*Math.random()),subject:e};this.window.parent.postMessage(JSON.stringify(n),"*")},e.prototype.registerIFrameMessageCallback=function(e){this.iframeCallbacks.push(e)},e.prototype.parseMessage=function(e){try{return JSON.parse(e)}catch(e){return null}},e.ctorParameters=function(){return[{type:Window,decorators:[{type:o.C,args:[r.b]}]}]},e=Object(a.c)([Object(o.E)({providedIn:"root"})],e)}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n(1),o=n(0),r=n(10),i=n(41),s=function(){function e(e){this.window=e,this.MOBILE_REGEX_FULL=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i,this.MOBILE_REGEX_INIT=/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i}return e.prototype.isRunningInIframe=function(){try{return this.window.self!==this.window.top}catch(e){return!0}},e.prototype.autoGrowIframe=function(){var e=this;this.isRunningInIframe()&&setInterval((function(){return e.resizeIFrame()}),250)},e.prototype.textWidth=function(e,t){var n=r('<span aria-hidden="true">').html(t);n.insertAfter(e);var a=n.width();return n.remove(),a},e.prototype.resizeDropdowns=function(e){var t=this;r(e).each((function(e,n){var a=r(n),o=a.find("option:selected").text(),i=t.textWidth(a,o);a.width(i+20)}))},e.prototype.isMobileOrTablet=function(){var e=this.window.navigator,t=void 0===e.userAgent?e.vendor:e.userAgent;return this.MOBILE_REGEX_FULL.test(t)||this.MOBILE_REGEX_INIT.test(t.substr(0,4))},e.prototype.resizeIFrame=function(){var e={height:document.body.offsetHeight+75,subject:"lti.frameResize"};this.window.parent.postMessage(JSON.stringify(e),"*")},e.ctorParameters=function(){return[{type:Window,decorators:[{type:o.C,args:[i.b]}]}]},e=Object(a.c)([Object(o.E)({providedIn:"root"})],e)}()},,,,,,,,,,,,,,,,,function(e,t){function n(e){return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}))}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=68},function(e,t,n){e.exports=n.p+"static/icon-filetype-document.67671ebafb4ad20301e6059b069de14f.svg"},function(e,t,n){e.exports=n.p+"static/icon-filetype-pdf.ef7af57df992cf7986f794efcce1de18.svg"},function(e,t,n){e.exports=n.p+"static/icon-filetype-presentation.c9b84d9560dd6d6bc0ed0398159aed2b.svg"},function(e,t,n){e.exports=n.p+"static/icon-filetype-wysiwyg.72969ab82838f07a0cc6932d30dbdc2a.svg"},,,function(e,t){e.exports='<div class="loading">\n    <span autoFocus *ngIf="title" class="loading-message sr-only" [innerHTML]="title"></span>\n    <span autoFocus *ngIf="!title" class="loading-message sr-only" translate="LOADING"></span>\n    <svg-icon [attr.aria-hidden]="true" [src]="icon"></svg-icon>\n</div>\n'},function(e,t){e.exports='<div class="loading">\n    <span *ngIf="title" class="loading-message sr-only" [innerHTML]="title"></span>\n    <span *ngIf="!title" class="loading-message sr-only" translate="LOADING"></span>\n    <svg-icon [attr.aria-hidden]="true" [src]="icon"></svg-icon>\n</div>\n'},function(e,t){e.exports='<div class="ally-note">\n    <svg-icon [attr.aria-hidden]="true" [src]="iconSrc"></svg-icon>\n    <span *ngIf="iconMessage" class="sr-only" [innerHTML]="iconMessage"></span>\n    <div class="ally-note-text">\n        <ng-content></ng-content>\n    </div>\n</div>\n'},,,,function(e,t,n){e.exports=n(239)},,,,,,,function(e,t,n){n(89),n(90),n(91),n(92),n(93),window.jQuery=n(10),n(94),n(95),n(96),window._=n(97),n(99),n(100),n(101),n(102),n(103),n(104),n(105),n(106),n(107),n(108),window.showdown=n(109),n(237),n(240),n(192),n(222),n(223),n(224),n(225),n(226),n(227),n(238),n(228),n(230),n(234)},,,function(e,t,n){"use strict";n.r(t)},function(e,t,n){"use strict";n.r(t)},function(e,t,n){"use strict";n.r(t)},,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n.r(t),n.d(t,"FileReference",(function(){return a}));var a=n(111).FileReference},function(e,t,n){"use strict";n.r(t),n.d(t,"FileReference",(function(){return o}));var a=n(10);function o(e,t,n){this.fileId=e.toString(),this.embed=t,this.uploadType=n||"File"}o.prototype.id=function(){var e=[this.fileId];if(this.embed){e.push("embed");var t=this.embed.altText;"string"===a.type(t)?e.push(JSON.stringify(t)):e.push("null")}return e.join(":")},o.prototype.data=function(){return{id:this.fileId,embed:this.embed,uploadType:this.uploadType}},o.prototype.isEmbedded=function(){return null!==this.embed&&void 0!==this.embed},o.fromAltText=function(e,t){return new o(e,{altText:t})},o.fromElement=function(e,t,n){if(n=n||{},"img"===e.prop("tagName").toLowerCase()){var a=e.attr("alt");return Object.prototype.hasOwnProperty.call(n,"alt")&&(a=n.alt),o.fromAltText(t,a)}return new o(t)},o.fromData=function(e){return new o(e.id,e.embed,e.uploadType)}},,,function(e,t,n){e.exports=n.p+"static/arrow-left.439c982848b7120e1fdf94c658000a50.svg"},function(e,t,n){e.exports=n.p+"static/arrow-right.733d8987b9644951214512fe831e2437.svg"},function(e,t,n){e.exports=n.p+"static/arrow-drops-up.f6f69c644bc2d0c45b4efee1728b9acc.svg"},function(e,t,n){e.exports=n.p+"static/icon-mimetype-default.eaa14e013e1195e5f715a1db7488959b.svg"},function(e,t,n){e.exports=n.p+"static/icon-mimetype-application-doc.b840ad456ebf01cc8628b190c35761cc.svg"},function(e,t,n){e.exports=n.p+"static/icon-mimetype-application-docx.04d050e7daaf96b567d0fba5962dd4a5.svg"},function(e,t,n){e.exports=n.p+"static/icon-mimetype-application-odp.508a4100daa66665a7ee2eb259c8e71c.svg"},function(e,t,n){e.exports=n.p+"static/icon-mimetype-application-ods.a4c2bdc0431e56a82e133de1928e7448.svg"},function(e,t,n){e.exports=n.p+"static/icon-mimetype-application-odt.cb6d89c78240ec132658988faa822b89.svg"},function(e,t,n){e.exports=n.p+"static/icon-mimetype-application-pdf.9a80d904cba7163aa0ebdad22e4f5357.svg"},function(e,t,n){e.exports=n.p+"static/icon-mimetype-application-ppt.888123ee3213ec60e967ab9f52e049fe.svg"},function(e,t,n){e.exports=n.p+"static/icon-mimetype-application-pptx.274183f462afb779537ab56cdab64807.svg"},function(e,t,n){e.exports=n.p+"static/icon-mimetype-application-swf.e95099ba23dd8aecd9ed7284fa56c11d.svg"},function(e,t,n){e.exports=n.p+"static/icon-mimetype-application-xls.c0680f680183217722bba47abaf3bee8.svg"},function(e,t,n){e.exports=n.p+"static/icon-mimetype-application-xlsx.8636c57f4399e76c5335c2b6f49794fd.svg"},function(e,t,n){e.exports=n.p+"static/icon-mimetype-application-zip.ed5ae7f69e02e03d2cb2ec0addb5966d.svg"},function(e,t,n){e.exports=n.p+"static/icon-mimetype-audio-mp-3.078dda17b4ee819b08b20f549fcf98a2.svg"},function(e,t,n){e.exports=n.p+"static/icon-mimetype-audio-wav.4e4e779f4dadf2db94dfd0046733ada6.svg"},function(e,t,n){e.exports=n.p+"static/icon-mimetype-image-gif.2e1370e7b99698e14307faa10bc50c57.svg"},function(e,t,n){e.exports=n.p+"static/icon-mimetype-image-jpg.d20c38d3b3013641500aa4c638fc10c3.svg"},function(e,t,n){e.exports=n.p+"static/icon-mimetype-image-png.13ea7b6cd40587eae4f9e48a3b8b7e69.svg"},function(e,t,n){e.exports=n.p+"static/icon-mimetype-image-svg.5db53c1540455bffe166ba17524d2b4f.svg"},function(e,t,n){e.exports=n.p+"static/icon-mimetype-image-tiff.f4013cf0ccdc8ba78dc9f57da57569ac.svg"},function(e,t,n){e.exports=n.p+"static/icon-mimetype-text-html.3dfb44d266495694d2df31c9def369a6.svg"},function(e,t,n){e.exports=n.p+"static/icon-mimetype-text-rtf.81a72ff3cdaf47bbc041708792214391.svg"},function(e,t,n){e.exports=n.p+"static/icon-mimetype-text-txt.58c398d345d1b75c9254e004e249b234.svg"},function(e,t,n){e.exports=n.p+"static/icon-mimetype-video-mp-4.f72a1628a518646f5f0e3979e62db0f2.svg"},function(e,t,n){e.exports=n.p+"static/icon-filetype-default.eaa14e013e1195e5f715a1db7488959b.svg"},function(e,t,n){e.exports=n.p+"static/icon-filetype-audio.14cd9a6586ef34c3fc51c2fcf7f0a2cd.svg"},function(e,t,n){e.exports=n.p+"static/icon-filetype-archive.ed5ae7f69e02e03d2cb2ec0addb5966d.svg"},function(e,t,n){e.exports=n.p+"static/icon-filetype-html.a454e007306645be72aa431d6f796f66.svg"},function(e,t,n){e.exports=n.p+"static/icon-filetype-image.000abe49b2e806850f733e7198f36f84.svg"},function(e,t,n){e.exports=n.p+"static/icon-filetype-text.fda8c166fb8907037c68e951288870dd.svg"},function(e,t,n){e.exports=n.p+"static/icon-filetype-video.76f6978ec88e274cd8726c4d8fb65727.svg"},function(e,t,n){e.exports=n.p+"static/info.78e9cfceecb2db8efda62de5c6b03655.svg"},function(e,t,n){e.exports=n.p+"static/warning.db9fa5429592a4c373ab7abfb952cb5b.svg"},function(e,t,n){e.exports=n.p+"static/file-download.b979922106c127f73c33757c2e5b651c.svg"},function(e,t,n){e.exports=n.p+"static/file-upload.d0467d8e2fde7dca78cdbf337ead821d.svg"},function(e,t,n){e.exports=n.p+"static/help.36b4f34e015045e49a857b01703b3f9e.svg"},function(e,t,n){e.exports=n.p+"static/loading.27c1bf577fa0e9c12acb1a62d4f82538.svg"},function(e,t,n){e.exports=n.p+"static/signout.4ba2843a18d4113eacf6d6b1530edbe1.svg"},function(e,t,n){e.exports=n.p+"static/check_circle.38e847c17893143f8e44425c7563c02a.svg"},function(e,t,n){e.exports=n.p+"static/cross_circle.8257a271313342df7416f0b312caed61.svg"},function(e,t,n){e.exports=n.p+"static/arrow_down.4b2e15b627268e41555a10ae993b7937.svg"},function(e,t,n){e.exports=n.p+"static/arrow_up.22534d6d56c2863352a524848d05fbda.svg"},function(e,t,n){e.exports=n.p+"static/print.b22cd5dd68952cb3d902720839f938a1.svg"},function(e,t,n){e.exports=n.p+"static/update.4378b28cdbf3c94041136e128ebffb62.svg"},function(e,t,n){e.exports=n.p+"static/expand_directory.b1e7f2be6afe6043fa20409815d4cb5d.svg"},,function(e){e.exports=JSON.parse('["af-NA","af","agq","ak","am","ar-AE","ar-BH","ar-DJ","ar-DZ","ar-EG","ar-EH","ar-ER","ar-IL","ar-IQ","ar-JO","ar-KM","ar-KW","ar-LB","ar-LY","ar-MA","ar-MR","ar-OM","ar-PS","ar-QA","ar-SA","ar-SD","ar-SO","ar-SS","ar-SY","ar-TD","ar-TN","ar-YE","ar","as","asa","ast","az-Cyrl","az-Latn","az","bas","be","bem","bez","bg","bm","bn-IN","bn","bo-IN","bo","br","brx","bs-Cyrl","bs-Latn","bs","ca-AD","ca-ES-VALENCIA","ca-FR","ca-IT","ca","ccp-IN","ccp","ce","cgg","chr","ckb-IR","ckb","cs","cu","cy","da-GL","da","dav","de-AT","de-BE","de-CH","de-IT","de-LI","de-LU","de","dje","dsb","dua","dyo","dz","ebu","ee-TG","ee","el-CY","el","en-001","en-150","en-AG","en-AI","en-AS","en-AT","en-AU","en-BB","en-BE","en-BI","en-BM","en-BS","en-BW","en-BZ","en-CA","en-CC","en-CH","en-CK","en-CM","en-CX","en-CY","en-DE","en-DG","en-DK","en-DM","en-ER","en-FI","en-FJ","en-FK","en-FM","en-GB","en-GD","en-GG","en-GH","en-GI","en-GM","en-GU","en-GY","en-HK","en-IE","en-IL","en-IM","en-IN","en-IO","en-JE","en-JM","en-KE","en-KI","en-KN","en-KY","en-LC","en-LR","en-LS","en-MG","en-MH","en-MO","en-MP","en-MS","en-MT","en-MU","en-MW","en-MY","en-NA","en-NF","en-NG","en-NL","en-NR","en-NU","en-NZ","en-PG","en-PH","en-PK","en-PN","en-PR","en-PW","en-RW","en-SB","en-SC","en-SD","en-SE","en-SG","en-SH","en-SI","en-SL","en-SS","en-SX","en-SZ","en-TC","en-TK","en-TO","en-TT","en-TV","en-TZ","en-UG","en-UM","en-US-POSIX","en-VC","en-VG","en-VI","en-VU","en-WS","en-ZA","en-ZM","en-ZW","en","eo","es-419","es-AR","es-BO","es-BR","es-BZ","es-CL","es-CO","es-CR","es-CU","es-DO","es-EA","es-EC","es-GQ","es-GT","es-HN","es-IC","es-MX","es-NI","es-PA","es-PE","es-PH","es-PR","es-PY","es-SV","es-US","es-UY","es-VE","es","et","eu","ewo","fa-AF","fa","ff-CM","ff-GN","ff-MR","ff","fi","fil","fo-DK","fo","fr-BE","fr-BF","fr-BI","fr-BJ","fr-BL","fr-CA","fr-CD","fr-CF","fr-CG","fr-CH","fr-CI","fr-CM","fr-DJ","fr-DZ","fr-GA","fr-GF","fr-GN","fr-GP","fr-GQ","fr-HT","fr-KM","fr-LU","fr-MA","fr-MC","fr-MF","fr-MG","fr-ML","fr-MQ","fr-MR","fr-MU","fr-NC","fr-NE","fr-PF","fr-PM","fr-RE","fr-RW","fr-SC","fr-SN","fr-SY","fr-TD","fr-TG","fr-TN","fr-VU","fr-WF","fr-YT","fr","fur","fy","ga","gd","gl","gsw-FR","gsw-LI","gsw","gu","guz","gv","ha-GH","ha-NE","ha","haw","he","hi","hr-BA","hr","hsb","hu","hy","id","ig","ii","is","it-CH","it-SM","it-VA","it","ja","jgo","jmc","ka","kab","kam","kde","kea","khq","ki","kk","kkj","kl","kln","km","kn","ko-KP","ko","kok","ks","ksb","ksf","ksh","kw","ky","lag","lb","lg","lkt","ln-AO","ln-CF","ln-CG","ln","lo","lrc-IQ","lrc","lt","lu","luo","luy","lv","mas-TZ","mas","mer","mfe","mg","mgh","mgo","mk","ml","mn","mr","ms-BN","ms-SG","ms","mt","mua","my","mzn","naq","nb-SJ","nb","nd","nds-NL","nds","ne-IN","ne","nl-AW","nl-BE","nl-BQ","nl-CW","nl-SR","nl-SX","nl","nmg","nn","nnh","nus","nyn","om-KE","om","or","os-RU","os","pa-Arab","pa-Guru","pa","pl","prg","ps","pt-AO","pt-CH","pt-CV","pt-GQ","pt-GW","pt-LU","pt-MO","pt-MZ","pt-PT","pt-ST","pt-TL","pt","qu-BO","qu-EC","qu","rm","rn","ro-MD","ro","rof","root","ru-BY","ru-KG","ru-KZ","ru-MD","ru-UA","ru","rw","rwk","sah","saq","sbp","sd","se-FI","se-SE","se","seh","ses","sg","shi-Latn","shi-Tfng","shi","si","sk","sl","smn","sn","so-DJ","so-ET","so-KE","so","sq-MK","sq-XK","sq","sr-Cyrl-BA","sr-Cyrl-ME","sr-Cyrl-XK","sr-Cyrl","sr-Latn-BA","sr-Latn-ME","sr-Latn-XK","sr-Latn","sr","sv-AX","sv-FI","sv","sw-CD","sw-KE","sw-UG","sw","ta-LK","ta-MY","ta-SG","ta","te","teo-KE","teo","tg","th","ti-ER","ti","tk","to","tr-CY","tr","tt","twq","tzm","ug","uk","ur-IN","ur","uz-Arab","uz-Cyrl","uz-Latn","uz","vai-Latn","vai-Vaii","vai","vi","vo","vun","wae","wo","xog","yav","yi","yo-BJ","yo","yue-Hans","yue-Hant","yue","zgh","zh-Hans-HK","zh-Hans-MO","zh-Hans-SG","zh-Hans","zh-Hant-HK","zh-Hant-MO","zh-Hant","zh","zu"]')},function(e,t,n){e.exports=n.p+"static/accessibleversions/locale/ar.36650a9e5af40a5c358b2c35cf6e1c5c.json"},function(e,t,n){e.exports=n.p+"static/accessibleversions/locale/ca.dfacd961fdd8c5ce174b21f585e4c84b.json"},function(e,t,n){e.exports=n.p+"static/accessibleversions/locale/cy.28e8f7e045d0e6343c7a5e8a861c3892.json"},function(e,t,n){e.exports=n.p+"static/accessibleversions/locale/da.60c983c7a771a14ced7bb2c943a00016.json"},function(e,t,n){e.exports=n.p+"static/accessibleversions/locale/de.3134748c08007414dc448aa76c9362ce.json"},function(e,t,n){e.exports=n.p+"static/accessibleversions/locale/en.7797129f5be41639d46ae97c528349b9.json"},function(e,t,n){e.exports=n.p+"static/accessibleversions/locale/en_GB.fd23debe8378eac532caa4014a380349.json"},function(e,t,n){e.exports=n.p+"static/accessibleversions/locale/en_US_pro.9ca6dda5c3251b68be94590f1b334912.json"},function(e,t,n){e.exports=n.p+"static/accessibleversions/locale/es.dacfa8d477b00b5481504c45e29993be.json"},function(e,t,n){e.exports=n.p+"static/accessibleversions/locale/eu_ES.83029cb7e1fda05a55bd9bccd6dc08e3.json"},function(e,t,n){e.exports=n.p+"static/accessibleversions/locale/fi.3030e95361c5b966370f3214aa1459b8.json"},function(e,t,n){e.exports=n.p+"static/accessibleversions/locale/fr.ab65c1b34573fcc353690bafec813907.json"},function(e,t,n){e.exports=n.p+"static/accessibleversions/locale/fr_CA.0ee2d1f59e21ec781eb35c213ecd453d.json"},function(e,t,n){e.exports=n.p+"static/accessibleversions/locale/ga.2e54b9b03f1a22a5b136193aa7288ef0.json"},function(e,t,n){e.exports=n.p+"static/accessibleversions/locale/he.682941ee5045dbc86649aa3918fc7263.json"},function(e,t,n){e.exports=n.p+"static/accessibleversions/locale/it.6ff3609efd346dfc8ee1e4ebdca2623f.json"},function(e,t,n){e.exports=n.p+"static/accessibleversions/locale/mi.a82d4c4a604e86132ca87e6dd9db73f9.json"},function(e,t,n){e.exports=n.p+"static/accessibleversions/locale/nb.ec694b5fdf3f3edb777480615775b35e.json"},function(e,t,n){e.exports=n.p+"static/accessibleversions/locale/nl.4b57fbe7aba85908773d659335f52216.json"},function(e,t,n){e.exports=n.p+"static/accessibleversions/locale/nn_NO.694ba6d41995161262ad9f144019aae1.json"},function(e,t,n){e.exports=n.p+"static/accessibleversions/locale/pl.334cb9c999cf31a4d0ff8b066d6d43b6.json"},function(e,t,n){e.exports=n.p+"static/accessibleversions/locale/pt.d7997c1e0b01f2b91b96d4f76f2890d8.json"},function(e,t,n){e.exports=n.p+"static/accessibleversions/locale/pt_BR.3a520764f7ff7a4c54afaea9475def7e.json"},function(e,t,n){e.exports=n.p+"static/accessibleversions/locale/sv.47fc638ea92a816ebf8a353eab557c2c.json"},function(e,t,n){e.exports=n.p+"static/accessibleversions/locale/tr.1ad8214cf9462658da93e7093b73da51.json"},function(e,t,n){e.exports=n.p+"static/accessibleversions/locale/xh_ZA.cea006e650dd39d8856a8ee72e84216c.json"},function(e,t,n){e.exports=n.p+"static/accessibleversions/locale/zh_TW.e0be55321e09a6ae85e224447aaf114f.json"},function(e,t,n){e.exports=n.p+"static/accessibleversions/locale/zu.768237542f0edc3fd11f58679946c354.json"},function(e,t,n){!function(e){"use strict";window.angular.module("ally").factory("i18nFactory",["$http",function(e){return function(t){var a=n(193)("./".concat(t.key,".json"));return e.get(a).then((function(e){return e.data}))}}])}()},function(e,t,n){var a={"./ar.json":194,"./ca.json":195,"./cy.json":196,"./da.json":197,"./de.json":198,"./en.json":199,"./en_GB.json":200,"./en_US_pro.json":201,"./es.json":202,"./eu_ES.json":203,"./fi.json":204,"./fr.json":205,"./fr_CA.json":206,"./ga.json":207,"./he.json":208,"./it.json":209,"./mi.json":210,"./nb.json":211,"./nl.json":212,"./nn_NO.json":213,"./pl.json":214,"./pt.json":215,"./pt_BR.json":216,"./sv.json":217,"./tr.json":218,"./xh_ZA.json":219,"./zh_TW.json":220,"./zu.json":221};function o(e){var t=r(e);return n(t)}function r(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}o.keys=function(){return Object.keys(a)},o.resolve=r,e.exports=o,o.id=193},function(e,t,n){e.exports=n.p+"static/accessibleversions/locale/ar.acd40ecf45faa3a62ec808d654872018.json"},function(e,t,n){e.exports=n.p+"static/accessibleversions/locale/ca.ca57e133390cab515ab973b7b85343b0.json"},function(e,t,n){e.exports=n.p+"static/accessibleversions/locale/cy.490e71bc556a82acb9e4c29d5f6c3a3a.json"},function(e,t,n){e.exports=n.p+"static/accessibleversions/locale/da.ce67f07d7697e3b4f9e7199d44b79b8c.json"},function(e,t,n){e.exports=n.p+"static/accessibleversions/locale/de.cc7ed569300f0b1757a67b396c095076.json"},function(e,t,n){e.exports=n.p+"static/accessibleversions/locale/en.ccb0b4344ccef20dcb085310d902d8df.json"},function(e,t,n){e.exports=n.p+"static/accessibleversions/locale/en_GB.677075bcd57e2149c8c4e3449af45bdb.json"},function(e,t,n){e.exports=n.p+"static/accessibleversions/locale/en_US_pro.cc087d4ea525e6a8c4751c6de3f95062.json"},function(e,t,n){e.exports=n.p+"static/accessibleversions/locale/es.3dce7bf3597f0d034cf11c828b9e5be7.json"},function(e,t,n){e.exports=n.p+"static/accessibleversions/locale/eu_ES.674af72c72c923904173d4a2e8a851f1.json"},function(e,t,n){e.exports=n.p+"static/accessibleversions/locale/fi.ac833144ac6b4c41a0218d71fa30688a.json"},function(e,t,n){e.exports=n.p+"static/accessibleversions/locale/fr.97935b747a39cb6812017609d93c3247.json"},function(e,t,n){e.exports=n.p+"static/accessibleversions/locale/fr_CA.4f44c053b8a2ef6b41f0a05736d65e90.json"},function(e,t,n){e.exports=n.p+"static/accessibleversions/locale/ga.814a5d1b45beb0e1c0164134da45d488.json"},function(e,t,n){e.exports=n.p+"static/accessibleversions/locale/he.f4b432152e320cb462ad9599e63cd4f8.json"},function(e,t,n){e.exports=n.p+"static/accessibleversions/locale/it.9e844c40217d7e3f41690c7edb225cb5.json"},function(e,t,n){e.exports=n.p+"static/accessibleversions/locale/mi.4d2ff2792c19518557fbfc8f97b04714.json"},function(e,t,n){e.exports=n.p+"static/accessibleversions/locale/nb.a46dfb4fb1ea81a6755321d45270284a.json"},function(e,t,n){e.exports=n.p+"static/accessibleversions/locale/nl.7d96027200412d02c0fafca4902cea47.json"},function(e,t,n){e.exports=n.p+"static/accessibleversions/locale/nn_NO.b6b38cea0fcf389256f0402d3ad6fd6b.json"},function(e,t,n){e.exports=n.p+"static/accessibleversions/locale/pl.283c6ecd35ff8d60fb2acc3332f35895.json"},function(e,t,n){e.exports=n.p+"static/accessibleversions/locale/pt.d6b5776a66322de489b9776bed3d85c2.json"},function(e,t,n){e.exports=n.p+"static/accessibleversions/locale/pt_BR.560cfb4616dee37c71a34cb7267e007a.json"},function(e,t,n){e.exports=n.p+"static/accessibleversions/locale/sv.f2839c6be53cc9913f963ca8e17895bc.json"},function(e,t,n){e.exports=n.p+"static/accessibleversions/locale/tr.ea699aeaea1a5e5c6da6672ce2d18ce4.json"},function(e,t,n){e.exports=n.p+"static/accessibleversions/locale/xh_ZA.a95568b417cbc322dd1df1026005ce90.json"},function(e,t,n){e.exports=n.p+"static/accessibleversions/locale/zh_TW.bac1579b782f8362a78961f2dcb00678.json"},function(e,t,n){e.exports=n.p+"static/accessibleversions/locale/zu.ea82cffb5d018f920dae8257d146054f.json"},function(e,t){!function(e,t){"use strict";e.module("ally").filter("markdown",["$sce",function(e){var n=new t.Converter;return function(t){var a=n.makeHtml(t||"");return e.trustAsHtml(a)}}])}(window.angular,window.showdown)},function(e,t){!function(e,t){"use strict";var n=["input:enabled","select:enabled","textarea:enabled","button:enabled","object","a[href]","area[href]","[tabindex]"];function a(t,n,a){var o=e(n);o.attr("tabindex",0).attr("aria-hidden","true"),o.on("focusin.ally-tab",(function(e){var n=a.allyTabStart,o=a.allyTabStart||a.allyTabEnd,r={};n?r.last=!0:r.first=!0,t.$broadcast("ally-tab-".concat(o,"-focus"),r),e.preventDefault()}))}function o(t,n){if(n){var a=function(e){return e.find("[data-ally-tab-init],[ally-tab-init]").first()}(t);if(a[0])return a[0].focus(),a[0]}if(i(t))return t.focus(),t[0];var o=r(t)[0];return o?(e(o).focus(),o):void 0}function r(t){var a=[];return t.find(n.join(",")).filter((function(t,n){return i(e(n))})).each((function(e,t){a.push(t)})),a}function i(e){return e.is(n.join(","))&&function(e){return e.is(":visible")&&(!e.is("[tabindex]")||function(e){var t=parseInt(e.attr("tabindex"));return!isNaN(t)&&t>=0}(e))}(e)}t.module("ally").directive("allyTab",["$timeout",function(t){return{restrict:"A",controller:function(){var e=null;this.tab=function(){e=!0},this.shiftTab=function(){e=!1},this.tabReset=function(){e=null},this.isTabForward=function(){return!0===e},this.isTabBackward=function(){return!1===e}},link:function(n,a,i,s){var c=e(a);c.on("keydown.ally-tab",(function(e){9===e.which?e.shiftKey?s.shiftTab():s.tab():s.tabReset()})),c.on("focusin.ally-tab",(function(){s.tabReset()})),n.$on("ally-tab-".concat(i.allyTab,"-focus"),(function(n,a){t((function(){a=a||{};var t,n,l=(t=e('[data-ally-tab-start="'.concat(i.allyTab,'"]')),n=e('[data-ally-tab-end="'.concat(i.allyTab,'"]')),(0!==t.length&&0!==n.length&&t.siblings().is(n)?t.nextUntil(n):null)||a.target&&e(a.target)||c);a.first||s.isTabForward()?o(l,!1):a.last||s.isTabBackward()?function(t){var n=r(t);if(n.length>0){var a=n[n.length-1];e(a).focus()}}(l):o(l,!0)}))}))}}}]).directive("allyTabPanel",["$timeout",function(t){return{restrict:"A",link:function(n,a,i){var s=e(a);function c(t){!1===t?(s.attr("aria-hidden","true"),r(s).forEach((function(t){var n=e(t);n.is("[tabindex]")?n.attr("data-ally-tab-prev-tabindex",n.attr("tabindex")):n.attr("data-ally-tab-prev-tabindex",""),n.attr("tabindex","-1")})),s.find("[data-ally-tab-init],[ally-tab-init]").removeAttr("data-ally-tab-init").removeAttr("ally-tab-init").attr("data-ally-tab-init-disabled","")):(s.attr("aria-hidden","false"),s.find("[data-ally-tab-prev-tabindex]").each((function(t,n){var a=e(n),o=a.attr("data-ally-tab-prev-tabindex");""===o?a.removeAttr("tabindex"):a.attr("tabindex",o),a.removeAttr("data-ally-tab-prev-tabindex")})),s.find("[data-ally-tab-init-disabled]").removeAttr("data-ally-tab-init-disabled").attr("data-ally-tab-init",""),o(s,!0))}n.$watch(i.allyTabPanelActive,(function(e){t(c,50,!0,e)}))}}}]).directive("allyTabStart",(function(){return{restrict:"A",link:a}})).directive("allyTabEnd",(function(){return{restrict:"A",link:a}}))}(window.jQuery,window.angular)},function(e,t){!function(e,t){"use strict";e.module("ally").directive("allyTablist",["allyI18nUtils",function(e){return{restrict:"A",scope:{tablist:"=allyTablist"},link:function(n,a){n.moveFocus=function(o){var r="ArrowRight"===o.key,i="ArrowLeft"===o.key,s="ltr"===e.getInfo().direction?1:-1,c=r?s:i?-1*s:0,l=(n.currentFocus+n.tablist.length+c)%n.tablist.length;n.tablist[n.currentFocus].tabindex=-1,t(a).find("[ally-tablist-index=".concat(l,"]"))[0].focus(),n.currentFocus=l,n.tablist[n.currentFocus].tabindex=0},n.selectTab=function(e){n.tablist[e].select(),n.tablist[n.currentFocus].tabindex=-1,n.currentFocus=e,n.tablist[n.currentFocus].tabindex=0},n.tablist.forEach((function(e,t){e.index=t,e.tabindex=-1,e.selectTab=function(){n.tablist.forEach((function(e){e.isSelected=!1})),n.selectTab(e.index),e.isSelected=!0},e.moveFocus=function(t){"Enter"===t.key?e.selectTab():n.moveFocus(t)}}));var o,r=(o=n.tablist.find((function(e){return e.isSelected})),o?o.index:0);n.currentFocus=r,n.tablist[r].tabindex=0}}}])}(window.angular,window.$)},function(e,t){!function(e){"use strict";window.angular.module("ally.templates",[])}()},function(e,t){!function(e){"use strict";window.angular.module("ally").service("accessibleVersionsService",(function(){var e={Enhanced:{title:"ENHANCED_VERSION",description:"ORIGINAL_FILE_WITH_AUTOMATED_IMPROVEMENTS"},Html:{title:"HTML",description:"FOR_VIEWING_IN_THE_BROWSER_AND_ON_MOBILE_DEVICES"},Pdf:{title:"TAGGED_PDF",description:"STRUCTURED_PDF_FOR_IMPROVED_USE_WITH_ASSISTIVE_TECHNOLOGY"},OcredPdf:{title:"OCRED_PDF",description:"AUTOMATICALLY_EXTRACTED_TEXT_FOR_IMPROVED_READING_AND_SEARCHING"},Epub:{title:"EPUB",description:"FOR_READING_AS_AN_E_BOOK"},Tts:{title:"AUDIO",description:"MP3_VERSION_FOR_LISTENING"},Braille:{title:"ELECTRONIC_BRAILLE",description:"BRF_VERSION_FOR_CONSUMPTION_ON_ELECTRONIC_BRAILLE_DISPLAYS"},Translation:{title:"TRANSLATION",description:"TRANSLATED_VERSION"},Beeline:{title:"BEELINE",description:"BEELINE_ENHANCED_VERSION"},ImmersiveReader:{title:"IMMERSIVE_READER",description:"IMMERSIVE_READER_VERSION"}};return{translateAlternativeVersion:function(t){return e[t]}}}))}()},function(e,t){!function(e){"use strict";window.angular.module("ally").factory("accessibleVersionsFactory",["allyRestApi","$q",function(e,t){function n(e,n){var a=t.defer();try{e.apply({},n.concat([function(e,t){e?a.reject(e):a.resolve(t)}]))}catch(e){a.reject(e)}return a.promise}return{getWebpageProfile:function(t){return n(e.getWebpageProfile,[t])},getAaasContentReport:function(t){return n(e.getAaasContentReport,[t,{formats:!0}])},getRichContentAssociatedFiles:function(t,a){return n(e.getRichContentAssociatedFiles,[t,a])},getIndividualRichContentReport:function(t){return n(e.getIndividualRichContentReport,[t,{formats:!0}])},getIndividualFileReport:function(t){return n(e.getIndividualFileReport,[{fileId:t},{formats:!0}])},disableAlternativeFormats:function(t,a){return n(e.disableAlternativeFormats,[t,a])},enableAlternativeFormats:function(t,a){return n(e.enableAlternativeFormats,[t,a])},sendExpertHelp:function(t,a,o,r){return n(e.sendAlternativeFormatsExpertHelp,[t,a,o,r])}}}])}()},function(e,t,n){!function(e){"use strict";var t=n(229);e.module("ally").directive("downloadLinkList",(function(){return{restrict:"E",templateUrl:t,scope:{links:"=",onSelect:"="}}}))}(window.angular)},function(e,t){var n="/accessibleversions/app/downloadlinklist/downloadlinklist.html";window.angular.module("ally.templates").run(["$templateCache",function(e){e.put(n,'<div class="downloadlinklist-container">\n    <ul>\n        <li data-ng-repeat="link in links">\n            <download-link data-link="link" on-select="onSelect"></download-link>\n        </li>\n    </ul>\n</div>\n')}]),e.exports=n},function(e,t,n){!function(e,t){"use strict";var a=n(231);function o(e){return e.title?e.title:e.text&&(0===(t=e.text).indexOf("/")||0===t.indexOf(".")||0===t.indexOf("http"))?r(e.text):e.text?e.text:r(e.href);var t}function r(e){var n=e.split("?").shift().split("#").shift();return t.chain(n.split("/")).compact().last()}e.module("ally").directive("downloadLink",(function(){return{restrict:"E",templateUrl:a,scope:{link:"=",onSelect:"="},link:function(e,t,n){e.hasSelect=n.onSelect,e.hasControl=e.hasSelect},controller:["$scope",function(e){e.uiLink={description:e.link.url,id:e.link.id,title:o(e.link)},e.hasClickListener=void 0!==e.onSelect;e.uiLink.icon={type:"page"},-1!==["page","pdf","document","presentation","html-fragment"].indexOf(e.link.fileType)&&(e.uiLink.icon.type=e.link.fileType)}]}}))}(window.angular,window._)},function(e,t,n){var a='<div class="downloadlink-container">\n    <a data-ng-attr-href="{{ onSelect ? \'#\' : undefined }}" data-ng-click="onSelect(uiLink.id)">\n        <div class="downloadlink-icon">\n            <img\n                data-ng-if="uiLink.icon.type === \'page\'"\n                src="'+n(232)+'"\n                aria-hidden="true"\n                class="downloadlink-icon-page" />\n            <img\n                data-ng-if="uiLink.icon.type === \'pdf\'"\n                src="'+n(70)+'"\n                aria-hidden="true" />\n            <img\n                data-ng-if="uiLink.icon.type === \'document\'"\n                src="'+n(69)+'"\n                aria-hidden="true" />\n            <img\n                data-ng-if="uiLink.icon.type === \'presentation\'"\n                src="'+n(71)+'"\n                aria-hidden="true" />\n            <img\n                data-ng-if="uiLink.icon.type === \'html-fragment\'"\n                src="'+n(72)+'"\n                aria-hidden="true" />\n        </div>\n        <div class="downloadlink-description">\n            <span dir="ltr" class="downloadlink-description-title" data-ng-bind="uiLink.title"></span>\n            <span\n                dir="ltr"\n                class="downloadlink-description-subtitle"\n                data-ng-if="uiLink.description"\n                data-ng-bind="uiLink.description"></span>\n        </div>\n        <div class="downloadlink-control" data-ng-if="hasControl">\n            <img\n                data-ng-if="hasSelect"\n                src="'+n(233)+'"\n                aria-hidden="true" />\n        </div>\n    </a>\n</div>\n',o="/accessibleversions/app/downloadlink/downloadlink.html";window.angular.module("ally.templates").run(["$templateCache",function(e){e.put(o,a)}]),e.exports=o},function(e,t,n){e.exports=n.p+"static/iconCustomPage.1b6c30af4b3e33564766490cff827eae.svg"},function(e,t,n){e.exports=n.p+"static/iconArrowRight.11ea5efbd1c9e8f273869a6d8487a079.svg"},function(e,t){!function(e){"use strict";window.angular.module("ally").constant("allyI18nBundles",{})}()},function(e,t,n){"use strict";n.r(t),n.d(t,"AppModule",(function(){return c}));var a=n(1),o=n(0),r=n(26),i=n(14),s=n(41),c=function(){function e(e){this.upgrade=e}return e.prototype.ngDoBootstrap=function(){this.upgrade.bootstrap(document,["ally"],{strictDi:!0})},e.ctorParameters=function(){return[{type:i.a}]},e=Object(a.c)([Object(o.M)({declarations:[],imports:[r.a,s.a,i.a]})],e)}()},function(e,t,n){"use strict";n.r(t),n.d(t,"init",(function(){return b})),n.d(t,"getRestApi",(function(){return g})),n.d(t,"getFileInformation",(function(){return h})),n.d(t,"generateAxeFeedback",(function(){return y})),n.d(t,"getClientInfo",(function(){return A})),n.d(t,"fetchContentBody",(function(){return T})),n.d(t,"getImmersiveReaderAuth",(function(){return w})),n.d(t,"getIndividualFileReport",(function(){return I})),n.d(t,"getIndividualRichContentReport",(function(){return x})),n.d(t,"getAaasContentReport",(function(){return E})),n.d(t,"getCourseReport",(function(){return N})),n.d(t,"getEmbedInfo",(function(){return R})),n.d(t,"enableAlternativeFormats",(function(){return _})),n.d(t,"disableAlternativeFormats",(function(){return F})),n.d(t,"getWebpageProfile",(function(){return L})),n.d(t,"getRichContentAssociatedFiles",(function(){return O})),n.d(t,"getDownloadUrl",(function(){return S})),n.d(t,"saveMetadata",(function(){return k})),n.d(t,"updateRichContentAltText",(function(){return C})),n.d(t,"removeRichContentAltText",(function(){return U})),n.d(t,"deleteFile",(function(){return j})),n.d(t,"listAvailableFormats",(function(){return G})),n.d(t,"downloadAlternativeVersion",(function(){return P})),n.d(t,"downloadAaasAlternativeVersion",(function(){return M})),n.d(t,"getAIAltTextForStandaloneImage",(function(){return D})),n.d(t,"getAIAltTextForWYSIWYGImage",(function(){return $})),n.d(t,"trackEvent",(function(){return z})),n.d(t,"getHelp",(function(){return W})),n.d(t,"sendInstructorFeedbackExpertHelp",(function(){return J})),n.d(t,"sendAlternativeFormatsExpertHelp",(function(){return K})),n.d(t,"checkFeatureFlag",(function(){return Y})),n.d(t,"checkCourseFeatureFlag",(function(){return Z}));var a=n(44),o=n(10);function r(e){this.interval=e||1e3,this._cancelled=!1,this._poll()}function i(e,t){this.interval=1e3,this.statusUrl=e,this.token=t,this._poll()}r.prototype=Object.create(a.prototype),r.prototype.constructor=r,r.prototype.url=function(){throw new Error("url() method needs to be implemented")},r.prototype.headers=function(){return{}},r.prototype.states=function(){return{failed:"Failed",success:"Succeeded"}},r.prototype.cancel=function(){this._cancelled=!0,this.emit("cancelled")},r.prototype._poll=function(){var e=this;if(!e._cancelled){var t=e.url(),n=e.states(),a=e.headers();o.ajax({url:t,type:"GET",headers:a,crossDomain:!0,success:function(t){if(!e._cancelled)return t.status===n.success?e.emit("finished"):t.status===n.failed?e.emit("error",{code:500,msg:"Processing is reported to have failed"}):(e.emit("progress",t.status),setTimeout((function(){e._poll()}),e.interval))},error:function(t,n){if(!e._cancelled)return e.emit("error",{code:n,msg:t.responseText})}})}},i.prototype=Object.create(r.prototype),i.prototype.constructor=i,i.prototype.url=function(){return this.statusUrl},i.prototype.states=function(){return{failed:"failed",success:"success"}},i.prototype.headers=function(){return{Authorization:`Bearer ${this.token}`}};var s=n(62),c=n(4);function l(){}function u(){}l.prototype._getJwtToken=function(e){var t=this,n=t._getJwtTokenFromSessionStorage();if(n)return e(null,n);t._getJwtTokenFromApi((function(n,a){return n?e(n):(t._setJwtTokenInSessionStorage(a),e(null,a))}))},l.prototype._getJwtTokenFromApi=function(e){if(c.lti13Id()){var t=c.baseUrl().split("/"),n=t[0],a=`institution.${t[2]}`,r=encodeURIComponent(`${n}//${a}/api/v2/auth/lti/1.3/target`);this._getExternalToolFromApi(r,(function(t,n){if(null!=t)return e(t);var a=s(n),r=Date.now(),i=`/api/lti/authorize?lti_message_hint=${a.lti_message_hint}&client_id=${c.lti13Id()}&redirect_uri=${c.baseUrl()}/api/v2/auth/lti/1.3/callback&login_hint=${a.login_hint}&nonce=${r}&scope=openid&response_type=id_token&response_mode=form_post&prompt=none`;o.ajax({url:i,dataType:"html",success:function(t){var n=o.parseHTML(t).find((function(e){return"authorization_redirect_form"===e.id})),a=n&&o(n).find("#id_token"),r=a&&a.attr("value");return null!=r?e(null,r):e({msg:"Failed to authenticate user."})},error:function(t){return e({code:t.status,msg:t.responseText})}})}))}else{var i=encodeURIComponent(`${c.baseUrl()}/api/v1/${c.clientId()}/lti/institution`);this._getExternalToolFromApi(i,e)}},l.prototype._getExternalToolFromApi=function(e,t){o.ajax({url:`/api/lti/courses/${c.courseId()}/jwt_token?tool_launch_url=${e}`,dataType:"json",success:function(e){return t(null,e.jwt_token)},error:function(e){return t({code:e.status,msg:e.responseText})}})},l.prototype._getJwtTokenFromSessionStorage=function(){var e=this._getSessionJwtKey(),t=window.sessionStorage.getItem(e);if(!t)return null;var n=null;try{n=JSON.parse(t),s(n.token)}catch(e){return null}var a=Date.now()-18e5;return n.timeStamp<a?null:n.token},l.prototype._setJwtTokenInSessionStorage=function(e){var t=this._getSessionJwtKey();try{window.sessionStorage.setItem(t,JSON.stringify({token:e,timeStamp:Date.now()}))}catch(e){}},l.prototype._getSessionJwtKey=function(){var e=window.ENV.current_user_id||"";return["ally","jwt",c.clientId(),c.courseId(),e,this._getRole()].join(".")},l.prototype._getRole=function(){if(-1!==(window.ENV.current_user_roles||[]).indexOf("admin"))return"administrator";var e=window.ENV.FILES_CONTEXTS||[],t=e&&e[0]&&e[0].permissions&&(e[0].permissions.manage_files_add||e[0].permissions.manage_files_delete||e[0].permissions.manage_files_edit),n=(window.ENV.WIKI_RIGHTS||{}).update,a=window.ENV.current_user_is_student;return n||t||!a?"course-administrator":window.ENV.current_user_id?"student":"anonymous"},l.prototype.sign=function(e,t,n,a){this._getJwtToken((function(e,o){if(e)return a(e);var r={url:c.baseUrl()+t,headers:{Authorization:`Bearer ${o}`},parameters:n};return a(null,r)}))},l.prototype.http=function(e,t,n,a,r){a=a||{};this._getJwtToken((function(i,s){if(i)return r(i);var l={url:c.baseUrl()+t,type:e,crossDomain:!0,xhrFields:{withCredentials:!1},data:n,success:function(e){return r(null,e)},error:function(e){return r({code:e.status,msg:e.responseText})}};l.headers=a.headers||{},l.headers.Authorization=`Bearer ${s}`,a.contentType&&(l.contentType=a.contentType),o.ajax(l)}))},l.prototype.getDownloadUrl=function(e,t){return t(null,`${`${window.location.protocol}//${window.location.host}`}/files/${e}/download?download_frd=1`)},u.prototype.http=function(e,t,n,a,o){this._send("http",e,t,n,a,o)},u.prototype.sign=function(e,t,n,a){this._send("sign",e,t,n,null,a)},u.prototype.getDownloadUrl=function(e,t){this._send("getDownloadUrl",null,null,{fileId:e},null,t)},u.prototype._send=function(e,t,n,a,o,r){var i={subject:e,id:`iframe-api-${Math.floor(1e6*Math.random())}`,data:{method:t,path:n,parameters:a,opts:o}},s=function(e){var t=p(e);if(t&&t.responseTo===i.id)return window.removeEventListener("message",s),r(t.data.err,t.data.response)};window.addEventListener("message",s),window.parent.postMessage(JSON.stringify(i),"*")};var p=function(e){if(!e||!e.data)return null;try{return JSON.parse(e.data)}catch(e){return null}};function f(){}function d(){}function m(e,t){this.processId=e,this.interval=t||1e3,this._poll()}f.prototype.sign=function(e,t,n,a){return a(null,{url:c.baseUrl()+t,headers:{Authorization:`Bearer ${this._getJwtToken()}`},parameters:n})},f.prototype.http=function(e,t,n,a,r){a=a||{};var i={url:c.baseUrl()+t,type:e,crossDomain:!0,xhrFields:{withCredentials:!1},data:n,success:function(e){return r(null,e)},error:function(e,t){return r({code:t,msg:e.responseText})}};i.headers=a.headers||{},i.headers.Authorization=`Bearer ${this._getJwtToken()}`,a.contentType&&(i.contentType=a.contentType),o.ajax(i)},f.prototype.getDownloadUrl=function(e,t){return t({code:501,msg:"Learn does not support direct downloads"})},f.prototype._getJwtToken=function(){return window.ALLY_TOKEN},d.prototype.sign=function(e,t,n,a){return a(null,{url:c.baseUrl()+t,headers:{Authorization:`Bearer ${this._getJwtToken()}`},parameters:n})},d.prototype.http=function(e,t,n,a,r){a=a||{};var i={url:c.baseUrl()+t,type:e,crossDomain:!0,xhrFields:{withCredentials:!1},data:n,success:function(e){return r(null,e)},error:function(e,t){return r({code:t,msg:e.responseText})}};i.headers=a.headers||{},i.headers.Authorization=`Bearer ${this._getJwtToken()}`,a.contentType&&(i.contentType=a.contentType),o.ajax(i)},d.prototype.getDownloadUrl=function(e,t){return t({code:501,msg:"Moodle does not support direct downloads"})},d.prototype._getJwtToken=function(){return window.require.s.contexts._.require("filter_ally/ally").token()},m.prototype=Object.create(r.prototype),m.prototype.constructor=m,m.prototype.url=function(){return`/api/v1/processes/${this.processId}`};let v=null;function b(){switch(c.lmsType()){case"canvas":v=new l;break;case"learn":v=new f;break;case"moodle":v=new d;break;case"iframe":v=new u;break;default:throw new Error(`Unsupported LMS type specified: ${c.lmsType()}`)}}function g(){if(null!==v)return v;throw new Error("Rest API was not initialized yet. Have you called .init()?")}function h(e,t,n){t=t||{};const a=e.map((function(e){return e.data()})),o=encodeURIComponent(c.courseId());let r=`/api/v1/${c.clientId()}/reports/courses/${o}/content`;!0!==t.forceInstructorFeedbackEnabled&&!1!==t.forceInstructorFeedbackEnabled||(r+=`?forceInstructorFeedbackEnabled=${t.forceInstructorFeedbackEnabled}`),v.http("POST",r,JSON.stringify(a),{contentType:"application/json"},(function(e,t){if(e)return n(e);const a={uploadsReport:t.uploadsReport.map((function(e){return e&&null!==e.libraryReference&&(e.libraryReference=Q(e.libraryReference)),e})),flags:t.flags};return n(null,a)}))}function y(e,t){v.http("POST",`/api/v1/${c.clientId()}/content/generateFeedback/axe`,JSON.stringify(e),{contentType:"application/json"},t)}function A(){return new Promise(((e,t)=>{const n={courseId:encodeURIComponent(c.courseId())};v.http("GET",`/api/v1/${c.clientId()}`,n,{},((n,a)=>{n?t(n):e(a)}))}))}function T(e,t){const n=encodeURIComponent(e),a={uploadType:encodeURIComponent(t)};return new Promise(((e,t)=>{v.http("GET",`/api/v1/${c.clientId()}/content/course/${c.courseId()}/content/${n}`,a,{},((n,a)=>{n?t(n):e(a)}))}))}function w(){return new Promise(((e,t)=>{v.http("GET",`/api/v1/${c.clientId()}/azure/immersiveReader/authenticate`,null,{},((n,a)=>{n?t(n):e(a)}))}))}function I(e,t,n){t=t||{};const a=encodeURIComponent(c.courseId()),o=encodeURIComponent(e.fileId);var r=`/api/v2/clients/${c.clientId()}/courses/${a}/files/${o}/report`;const i=[];if("string"==typeof t.uploadType&&i.push(`uploadType=${t.uploadType}`),"boolean"==typeof t.feedback&&i.push(`feedback=${t.feedback}`),"boolean"==typeof t.formats&&i.push(`formats=${t.formats}`),void 0!==e.embed){const t=encodeURIComponent(JSON.stringify(e.embed));i.push(`embed=${t}`)}const s=`${r}?${i.join("&")}`;v.http("GET",s,null,{},(function(e,t){if(!e&&t&&t.metadata&&"string"==typeof t.metadata.libraryReference)try{t.metadata.libraryReference=JSON.parse(t.metadata.libraryReference)}catch(e){}return n(e,t)}))}function x(e,t,n){t=t||{};const a=encodeURIComponent(c.courseId()),o=encodeURIComponent(e);var r=`/api/v2/clients/${c.clientId()}/courses/${a}/rich-content/${o}/report`;const i=[];"boolean"==typeof t.feedback&&i.push(`feedback=${t.feedback}`),"boolean"==typeof t.formats&&i.push(`formats=${t.formats}`);const s=`${r}?${i.join("&")}`;v.http("GET",s,null,{},n)}function E(e,t,n){t=t||{};var a=`/api/v2/clients/${c.clientId()}/content/${e}`;const o=[];"boolean"==typeof t.feedback&&o.push(`feedback=${t.feedback}`),"boolean"==typeof t.formats&&o.push(`formats=${t.formats}`);const r=`${a}?${o.join("&")}`;v.http("GET",r,null,{},(function(e,t){if(!e&&t&&t.metadata&&"string"==typeof t.metadata.libraryReference)try{t.metadata.libraryReference=JSON.parse(t.metadata.libraryReference)}catch(e){}return n(e,t)}))}function N(e){var t=encodeURIComponent(c.courseId()),n=`/api/v1/${c.clientId()}/reports/courses/${t}`;v.http("GET",n,null,{},e)}function R(e,t,n){const a=encodeURIComponent(c.courseId()),o="RichContent"===e?"rich-content":"files",r=encodeURIComponent(t),i=`/api/v1/${c.clientId()}/courses/${a}/${o}/${r}/embedInfo`;v.http("GET",i,null,{},n)}function _(e,t,n){const a=encodeURIComponent(c.courseId()),o=encodeURIComponent(t),r="RichContent"===e?"rich-content":"files",i=["/api/v1",c.clientId(),"courses",a,r,o,"enableAlternativeFormats"].join("/");v.http("POST",i,null,{},n)}function F(e,t,n){const a=encodeURIComponent(c.courseId()),o=encodeURIComponent(t),r="RichContent"===e?"rich-content":"files",i=["/api/v1",c.clientId(),"courses",a,r,o,"disableAlternativeFormats"].join("/");v.http("POST",i,null,{},n)}function L(e,t){var n=`/api/v1/${c.clientId()}/webpageProfile`;v.http("POST",n,JSON.stringify({webpage:e}),{contentType:"application/json"},t)}function O(e,t,n){t=t||[];const a=encodeURIComponent(c.courseId()),o=encodeURIComponent(e),r=["/api/v2/clients",c.clientId(),"courses",a,"rich-content",o,"files"].join("/");v.http("POST",r,JSON.stringify(t),{contentType:"application/json"},n)}function S(e,t){var n=encodeURIComponent(c.courseId()),a=encodeURIComponent(e),o=`/api/v1/${c.clientId()}/courses/${n}/files/${a}/download`;v.http("GET",o,null,{headers:{Accept:"application/json"}},(function(e,n){return e?t(e):n&&n.url?t(null,n.url):t({code:404,msg:"Missing download url"})}))}function k(e,t,n){var a=encodeURIComponent(c.courseId()),o=encodeURIComponent(e),r=`/api/v1/${c.clientId()}/courses/${a}/files/${o}`;v.http("POST",r,t,null,(function(e,t){return e?n(e):(t.libraryReference&&"string"==typeof t.libraryReference&&(t.libraryReference=Q(t.libraryReference)),n(null,t))}))}function C(e,t,n,a,o,r){var i=encodeURIComponent(c.courseId()),s=`/api/v1/${c.clientId()}/courses/${i}/rich-content/${e}/alt-text`,l={fileId:t,locator:n,index:a,newAltText:o};v.http("POST",s,l,null,r)}function U(e,t,n,a,o){var r=encodeURIComponent(c.courseId()),i=`/api/v1/${c.clientId()}/courses/${r}/rich-content/${e}/alt-text`,s={fileId:t,locator:n,index:a};v.http("DELETE",i,s,null,o)}function j(e,t){var n=encodeURIComponent(c.courseId()),a=`/api/v1/${c.clientId()}/courses/${n}/files/${e}`;v.http("DELETE",a,{},null,t)}function G(e,t,n){var o=`/api/v1/${c.clientId()}/content/listAvailableFormats`,r=JSON.stringify({download:e});v.http("POST",o,r,{contentType:"application/json"},(function(o,r){if(o)return n(o);if("Failed"===r.status)return n({msg:r.message,errorType:r.errorType});if(r.status&&t){var i=new a,s=new m(r.process_id||r.processId,t);return s.on("progress",(function(e){i.emit("progress",e)})),i.cancel=function(){s.cancel()},s.on("cancelled",(function(){i.emit("cancelled")})),s.on("error",(function(){X(e,i)})),s.on("finished",(function(){X(e,i)})),n(null,{emitter:i})}return r.status?n({code:500,msg:"Expected immediate response"}):r.formats?n(null,{formats:r.formats,libraryReference:r.libraryReference,newAlternativeFormats:r.newAlternativeFormats}):n({code:500,msg:"Unexpected response (no status and no available formats)"})}))}function P(e,t,n,o,r,i,s,l){if((s=s||1)>3)return i({msg:"Surpassed maximum number of process deferals",errorType:"generic"});var u=null,p=`/api/v1/${c.clientId()}`,f=null,d=null;if(e.url)u="POST",p+="/content/convert",f=JSON.stringify({asAttachment:o,download:e,format:{name:t,options:{formatParam:n}},acceptTermsOfUse:!0}),d={contentType:"application/json"};else{const a=encodeURIComponent(e.lms.courseId);u="GET";const r=encodeURIComponent(e.lms.externalId);"RichContent"===e.lms.uploadType?p+=`/courses/${a}/rich-content/${r}/formats/${t}`:p+=`/formats/${a}/${r}/${t}`,f={acceptTOU:!0,formatParam:n,asAttachment:o,contentHash:e.lms.contentHash},d=null}v.http(u,p,f,d,(function(c,u){if(c)return i(c);if("Failed"===u.status)return i({msg:u.message,errorType:u.errorType});if(u.status&&r){l=l||new a;var p=new m(u.processId,r);return p.on("progress",(function(e){l.emit("progress",e)})),l.cancel=function(){p.cancel()},p.on("cancelled",(function(){l.emit("cancelled")})),p.on("error",(function(){q(e,t,n,o,r,s,l)})),p.on("finished",(function(){q(e,t,n,o,r,s,l)})),i(null,{emitter:l})}return u.status?i({code:500,msg:"Expected immediate response"}):u.url?i(null,{url:u.url}):i({code:500,msg:"Unexpected response (no status and no url)"})}))}function M(e,t,n,o,r,s,l,u,p){if((u=u||1)>3)return l({msg:"Surpassed maximum number of process deferals",errorType:"generic"});V((function(u,f){if(u)return l(u);!function(e,t,n,a,o){var r="POST",i=`/api/v2/clients/${c.clientId()}/content/${e}/formats/${n}`,s={formatParam:a,url:t};v.http(r,i,s,null,o)}(e,t,n,o,(function(e,t){if(e)return l(e);if("Failed"===t.status)return l({msg:t.error.message,errorType:t.error.type});if(t.downloadUrl)return B(t.downloadUrl,r,(function(e,t){return e?l({msg:"Unable to retrieve JWT token"}):l(null,{url:t})}));if(t.status&&s){p=p||new a;var n=new i(t.statusUrl,f);return n.on("progress",(function(e){p.emit("progress",e)})),p.cancel=function(){n.cancel()},n.on("cancelled",(function(){p.emit("cancelled")})),n.on("error",(function(){H(t.statusUrl,r,p)})),n.on("finished",(function(){H(t.statusUrl,r,p)})),l(null,{emitter:p})}return t.status?l({code:500,msg:"Expected immediate response"}):l({code:500,msg:"Unexpected response (no status and no url)"})}))}))}function D(e,t){const n=`/api/v2/clients/${c.clientId()}/courses/${c.courseId()}/files/${e}/captions/suggestion?lang=${t}`;return new Promise(((e,t)=>{v.http("POST",n,null,{},((n,a)=>{n&&t(n),e(a)}))}))}function $(e,t){const n=`/api/v2/clients/${c.clientId()}/courses/${c.courseId()}/captions/suggestion?lang=${t}`;return new Promise(((t,a)=>{v.http("POST",n,JSON.stringify({source:e}),{contentType:"application/json"},((e,n)=>{e&&a(e),t(n)}))}))}function H(e,t,n){v.http("GET",e,null,null,(function(e,a){return e?n.emit("error",e):"failed"===a.status?n.emit("error",{msg:a.error.message,errorType:a.error.type}):"success"===a.status?B(a.downloadUrl,t,(function(e,t){if(e)return n.emit("error",e);n.emit("finished",t)})):void 0}))}function B(e,t,n){V((function(a,o){if(a)return n(a);const r=`${c.baseUrl()}${e}?asAttachment=${t}&jwt=${o}`;return n(null,r)}))}function V(e){v.sign("GET","/",null,(function(t,n){if(t)return e(t);const a=n.headers.Authorization.split(" ").pop();return e(null,a)}))}function z(e,t,n){n=n||function(){};var a=`/api/v1/${c.clientId()}/events`,o={name:e,properties:t};v.http("POST",a,JSON.stringify(o),{contentType:"application/json"},n)}function W(e,t){var n=`/api/v1/${c.clientId()}/help`;v.http("GET",n,e,null,t)}function J(e,t,n,a,o){o=o||{};var r=encodeURIComponent(c.courseId()),i=encodeURIComponent(e),s=`/api/v1/${c.clientId()}/courses/${r}/files/${i}/help/sendExpertInstructorFeedbackHelp`,l={currentIssue:n,fromPageUrl:t};a&&(l.message=a),v.http("POST",s,l,null,o)}function K(e,t,n,a,o){o=o||{};var r=encodeURIComponent(c.courseId()),i=encodeURIComponent(e.id),s=`/api/v1/${c.clientId()}/courses/${r}/files/${i}/help/sendExpertAlternativeFormatsHelp`,l={currentFormat:n,fromPageUrl:t};e.name&&(l.fileName=e.name),e.type&&(l.fileType=e.type),e.url&&(l.fileUrl=e.url),a&&(l.message=a),v.http("POST",s,l,null,o)}function Y(e,t){const n=`/api/v1/${c.clientId()}/feature/${e}`;v.http("GET",n,{},{},t)}function Z(e,t,n){const a=`/api/v1/${c.clientId()}/course/${t}/feature/${e}`;v.http("GET",a,{},{},n)}function q(e,t,n,a,o,r,i){P(e,t,n,a,o,(function(e,t){return e?i.emit("error",e):t.url?i.emit("finished",t.url):void 0}),r+1,i)}function X(e,t){G(e,null,(function(e,n){if(e)return t.emit("error",e);if(n.formats){const e={formats:n.formats,libraryReference:n.libraryReference,newAlternativeFormats:n.newAlternativeFormats};return t.emit("finished",e)}}))}function Q(e){if(e)try{return JSON.parse(e)}catch(e){return null}return null}},function(e,t,n){"use strict";n.r(t);var a,o=n(14),r=n(49),i=n(1),s=n(0);!function(e){e.FooAction="FooAction",e.CompleteDownloadAlternativeFormat="CompleteDownloadAlternativeFormat",e.AlteredThroughInstructorFeedback="AlteredThroughInstructorFeedback",e.BeginDownloadAlternativeFormat="BeginDownloadAlternativeFormat",e.EngageAlternativeFormat="EngageAlternativeFormat",e.EngageInstructorFeedback="EngageInstructorFeedback",e.CancelDownloadAlternativeFormat="CancelDownloadAlternativeFormat",e.CloseInstructorFeedback="CloseInstructorFeedback",e.ListWebpageLinks="ListWebpageLinks",e.NeedExtraHelp="NeedExtraHelp",e.OpenLibraryReferenceAlternativeFormat="OpenLibraryReferenceAlternativeFormat"}(a||(a={}));var c=n(7),l=function(){function e(){this.allyConfig={clientId:"",courseId:"",lmsType:""},this.skipDefaultTracker=!1,this.externalTrackers=[]}return e.prototype.config=function(e,t,n){var a=this;void 0===n&&(n=!1),this.allyConfig=e,this.skipDefaultTracker=n,Object(c.d)(t,(function(e){return a.externalTrackers=[e]}))},e.prototype.needExtraHelp=function(e,t){this.trackEvent(a.NeedExtraHelp,{clientId:this.allyConfig.clientId,courseId:this.allyConfig.courseId,helpType:e,lmsType:this.allyConfig.lmsType,role:t})},e.prototype.trackEvent=function(e,t){this.skipDefaultTracker||this.defaultTracker(e,t),this.externalTrackers.forEach((function(n){return n(e,t)}))},e}(),u=n(247),p=n(110).FileReference,f=n(4),d=n(236),m=n(241),v=function(){function e(){var e=this;this.reloadSubject=new u.a(!1),this.baseUrl=window.location.href.split("/").slice(0,3).join("/"),this.allyConfig={baseUrl:this.baseUrl,lmsType:"iframe"},this.deleteFile=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.proxyCall("deleteFile",t)},this.disableAlternativeFormats=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.proxyCall("disableAlternativeFormats",t)},this.listAvailableFormats=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.proxyCall("listAvailableFormats",t)},this.downloadAaasAlternativeVersion=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.proxyCall("downloadAaasAlternativeVersion",t)},this.downloadAlternativeVersion=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.proxyCall("downloadAlternativeVersion",t)},this.enableAlternativeFormats=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.proxyCall("enableAlternativeFormats",t)},this.getWebpageProfile=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.proxyCall("getWebpageProfile",t)},this.getCourseReport=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.proxyCall4Promises("getCourseReport",t)},this.getClientInfo=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.proxyCall4Promises("getClientInfo",t)},this.getDownloadUrl=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.proxyCall("getDownloadUrl",t)},this.getEmbedInfo=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.proxyCall("getEmbedInfo",t)},this.getIndividualFileReport=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];e.proxyCall("getIndividualFileReport",t)},this.getIndividualRichContentReport=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.proxyCall("getIndividualRichContentReport",t)},this.getAaasContentReport=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.proxyCall("getAaasContentReport",t)},this.getFileInformation=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.proxyCall("getFileInformation",t)},this.getImmersiveReaderAuth=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.proxyCall4Promises("getImmersiveReaderAuth",t)},this.getHelp=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.proxyCall("getHelp",t)},this.getRichContentAssociatedFiles=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.proxyCall("getRichContentAssociatedFiles",t)},this.removeRichContentAltText=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.proxyCall("removeRichContentAltText",t)},this.saveMetadata=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.proxyCall("saveMetadata",t)},this.updateRichContentAltText=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.proxyCall("updateRichContentAltText",t)},this.sendInstructorFeedbackExpertHelp=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.proxyCall("sendInstructorFeedbackExpertHelp",t)},this.sendAlternativeFormatsExpertHelp=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.proxyCall("sendAlternativeFormatsExpertHelp",t)},this.checkFeatureFlag=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.proxyCall("checkFeatureFlag",t)},this.checkCourseFeatureFlag=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.proxyCall("checkCourseFeatureFlag",t)},this.generateAxeFeedback=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.proxyCall("generateAxeFeedback",t)},this.fetchContentBody=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.proxyCall4Promises("fetchContentBody",t)}}return e.prototype.reloadObs=function(){return this.reloadSubject.asObservable()},e.prototype.init=function(e,t,n){return void 0===n&&(n=function(){return{}}),this.allyConfig.clientId=e,this.allyConfig.courseId=t,f.set(this.allyConfig),d.init(),this.restApi=d,n()},e.prototype.config=function(){return this.allyConfig},e.prototype.domain=function(){return{FileReference:p}},e.prototype.util=function(){return m},e.prototype.getUploadTargetInfo=function(e){var t=this;return this.restApi?new Promise((function(n,a){var o="/api/v1/"+t.allyConfig.clientId+"/courses/"+t.allyConfig.courseId+"/files/"+e;t.restApi.getRestApi().sign("POST",o,{},(function(e,t){e&&a(e),n(t)}))})):Promise.reject(new Error("The AllyRestApi hasn't been initialized yet. Call .init first."))},e.prototype.getAIAltTextForStandaloneImage=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this.restApi?this.proxyCall4Promises("getAIAltTextForStandaloneImage",e):Promise.reject(new Error("The AllyRestApi hasn't been initialized yet. Call .init first."))},e.prototype.getAIAltTextForWYSIWYGImage=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this.restApi?this.proxyCall4Promises("getAIAltTextForWYSIWYGImage",e):Promise.reject(new Error("The AllyRestApi hasn't been initialized yet. Call .init first."))},e.prototype.trackEvent=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this.proxyCall("trackEvent",e)},e.prototype.proxyCall=function(e,t){if(!this.restApi)return Promise.reject(new Error("The AllyRestApi hasn't been initialized yet. Call .init first."));this.restApi[e].apply(null,t)},e.prototype.proxyCall4Promises=function(e,t){var n;return this.restApi?(n=this.restApi)[e].apply(n,t):Promise.reject(new Error("The AllyRestApi hasn't been initialized yet. Call .init first."))},e.prototype.reload=function(){this.reloadSubject.next(!0)},e=Object(i.c)([Object(s.E)({providedIn:"root"})],e)}(),b=function(e){function t(t){var n=e.call(this)||this;return n.defaultTracker=t.trackEvent.bind(t),n}return Object(i.d)(t,e),t.prototype.listWebpageLinks=function(){this.trackEvent(a.ListWebpageLinks,this.commonEvent())},t.prototype.engageAlternativeFormat=function(e){var t=this.commonPayload();t.aafsEnabled=e.toString(),t.resourceUrl=this.allyConfig.resourceUrl,this.trackEvent(a.EngageAlternativeFormat,t)},t.prototype.openLibraryReferenceLink=function(e){var t=this.commonPayload();t.url=e,this.trackEvent(a.OpenLibraryReferenceAlternativeFormat,t)},t.prototype.beginDownloadAlternativeFormat=function(e,t){var n=this.commonPayloadWithFormatTypeAndResourceUrl(e);t&&(n.formatParam=t.formatParam),this.trackEvent(a.BeginDownloadAlternativeFormat,n)},t.prototype.cancelDownloadAlternativeFormat=function(e){var t=this.commonPayloadWithFormatTypeAndResourceUrl(e);this.trackEvent(a.CancelDownloadAlternativeFormat,t)},t.prototype.completeDownloadAlternativeFormat=function(e){var t=this.commonPayloadWithFormatTypeAndResourceUrl(e);this.trackEvent(a.CompleteDownloadAlternativeFormat,t)},t.prototype.commonEvent=function(){return{clientId:this.allyConfig.clientId,courseId:this.allyConfig.courseId,lmsType:this.allyConfig.lmsType,platformUi:this.allyConfig.platformUi}},t.prototype.commonPayload=function(){var e=this.commonEvent();return e.fileId=this.allyConfig.fileId,e.fileType=this.allyConfig.fileType,e},t.prototype.commonPayloadWithFormatTypeAndResourceUrl=function(e){var t=this.commonPayload();return t.formatType=e,t.resourceUrl=this.allyConfig.resourceUrl,t},t.ctorParameters=function(){return[{type:v}]},t=Object(i.c)([Object(s.E)({providedIn:"root"})],t)}(l),g=n(50),h=n(51),y=n(61),A=function(){function e(){this.regexp=new RegExp("https://[a-zA-Z0-9-]+.s3.?[a-zA-Z0-9-]*.amazonaws.com/.*"),this.regexpAlly=new RegExp("https://[a-zA-Z0-9-]+.ally.ac/.*")}return e.prototype.intercept=function(e,t){return this.isUrlAllowed(e.url)?t.handle(e):Object(y.a)(new Error("Access denied to URL"))},e.prototype.isUrlAllowed=function(e){return this.regexp.test(e)||this.regexpAlly.test(e)},e=Object(i.c)([Object(s.E)({providedIn:"root"})],e)}();window,window.angular.module("ally",["ngAria","pascalprecht.translate","tmh.dynamicLocale","ally.templates"]).constant("allyAppName","accessibleversions").constant("allyI18nSupportedLocales",["ar","ca","cy","da","de","en","en_GB","en_US_pro","es","eu_ES","fi","fr","fr_CA","ga","he","it","mi","nb","nl","nn_NO","pl","pt","pt_BR","sv","tr","xh_ZA","zh_TW","zu"]).constant("allyI18nDefaultLocale","en").service("allyRestApi",o.b(v)).service("allyAnalyticsAccessibleVersionService",o.b(b)).service("impactByInstructureIntegrationService",o.b(r.a)).service("frameMessageService",o.b(g.a)).service("frameResizeService",o.b(h.a)).factory("angularJsUrlInterceptor",o.b(A)).config(["$httpProvider",function(e){e.interceptors.push("angularJsUrlInterceptor")}])},function(e,t,n){"use strict";n.r(t);var a=n(7);function o(e){return Object(a.d)(e,(function(e){var t=e.split(".");return t.length>1?t[t.length-1]:null}))}var r,i,s,c,l,u,p,f=n(1),d=n(52);function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){g(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function g(e,t,n){var a;return a=function(e,t){if("object"!=m(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=m(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==m(a)?a:String(a))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}r=window.angular,i=window._,s=window.jQuery,c=window.showdown,l=["OcredPdf","Pdf","Html","Epub","Braille","Tts","Beeline","ImmersiveReader"],u={Beeline:"text/html",Braille:"text/plain",Epub:"application/epub+zip",Html:"text/html",OcredPdf:"application/pdf",Pdf:"application/pdf",Tts:"audio/mpeg",ImmersiveReader:"text/html"},p={brf:"text/plain",doc:"application/msword",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",epub:"application/epub+zip",html:"text/html",mp3:"audio/mpeg",pdf:"application/pdf",ppt:"application/vnd.ms-powerpoint",pptx:"application/vnd.openxmlformats-officedocument.presentationml.presentation",rtf:"application/rtf"},r.module("ally").controller("AccessibleVersionsController",["accessibleVersionsService","accessibleVersionsFactory","allyRestApi","allyAnalyticsAccessibleVersionService","impactByInstructureIntegrationService","frameMessageService","frameResizeService","$sce","$q","$scope","$timeout","$window","$translate",function(e,t,n,r,m,v,g,h,y,A,T,w,I){var x;A.textDirection=(x=I.preferredLanguage(),-1!==["ar","he","iw"].indexOf(x)?"rtl":"ltr");var E,N=[{nativeName:"Afrikaans",nameToTranslate:"LANGUAGE_AFRIKAANS",value:"af"},{nativeName:"Shqip",nameToTranslate:"LANGUAGE_ALBANIAN",value:"sq"},{nativeName:" ",nameToTranslate:"LANGUAGE_AMHARIC",value:"am"},{nativeName:"",nameToTranslate:"LANGUAGE_ARABIC",value:"ar"},{nativeName:"",nameToTranslate:"LANGUAGE_ARMENIAN",value:"hy"},{nativeName:"Azrbaycanca",nameToTranslate:"LANGUAGE_AZERBAIJANI",value:"az"},{nativeName:"",nameToTranslate:"LANGUAGE_BENGALI",value:"bn"},{nativeName:"",nameToTranslate:"LANGUAGE_BOSNIAN_CYRILLIC",value:"bs"},{nativeName:"",nameToTranslate:"LANGUAGE_BULGARIAN",value:"bg"},{nativeName:"catal",nameToTranslate:"LANGUAGE_CATALAN",value:"ca"},{nativeName:"",nameToTranslate:"LANGUAGE_CHINESE_SIMPLIFIED",value:"zh"},{nativeName:"",nameToTranslate:"LANGUAGE_CHINESE_TRADITIONAL",value:"zh-TW"},{nativeName:"Hrvatski",nameToTranslate:"LANGUAGE_CROATIAN",value:"hr"},{nativeName:"etina",nameToTranslate:"LANGUAGE_CZECH",value:"cs"},{nativeName:"Dansk",nameToTranslate:"LANGUAGE_DANISH",value:"da"},{nativeName:"Gaeilge",nameToTranslate:"LANGUAGE_IRISH",value:"ga"},{nativeName:"",nameToTranslate:"LANGUAGE_MARATHI",value:"mr"},{nativeName:" ()",nameToTranslate:"LANGUAGE_DARI",value:"fa-AF"},{nativeName:"Nederlands",nameToTranslate:"LANGUAGE_DUTCH",value:"nl"},{nativeName:"English",nameToTranslate:"LANGUAGE_ENGLISH",value:"en"},{nativeName:"Eesti",nameToTranslate:"LANGUAGE_ESTONIAN",value:"et"},{nativeName:"",nameToTranslate:"LANGUAGE_FARSI",value:"fa"},{nativeName:"Wikang Tagalog",nameToTranslate:"LANGUAGE_TAGALOG",value:"tl"},{nativeName:"Suomi",nameToTranslate:"LANGUAGE_FINNISH",value:"fi"},{nativeName:"Franais",nameToTranslate:"LANGUAGE_FRENCH",value:"fr"},{nativeName:"Franais canadien",nameToTranslate:"LANGUAGE_FRENCH_CANADA",value:"fr-CA"},{nativeName:"",nameToTranslate:"LANGUAGE_GEORGIAN",value:"ka"},{nativeName:"Deutsch",nameToTranslate:"LANGUAGE_GERMAN",value:"de"},{nativeName:"",nameToTranslate:"LANGUAGE_GREEK_MODERN",value:"el"},{nativeName:" ",nameToTranslate:"LANGUAGE_GUJARATI",value:"gu"},{nativeName:"Kreyl ayisyen",nameToTranslate:"LANGUAGE_HAITIAN",value:"ht"},{nativeName:"",nameToTranslate:"LANGUAGE_HAUSA",value:"ha"},{nativeName:"",nameToTranslate:"LANGUAGE_HEBREW",value:"he"},{nativeName:"",nameToTranslate:"LANGUAGE_HINDI",value:"hi"},{nativeName:"Magyar",nameToTranslate:"LANGUAGE_HUNGARIAN",value:"hu"},{nativeName:"slenska",nameToTranslate:"LANGUAGE_ICELANDIC",value:"is"},{nativeName:"Bahasa Indonesia",nameToTranslate:"LANGUAGE_INDONESIAN",value:"id"},{nativeName:"Italiano",nameToTranslate:"LANGUAGE_ITALIAN",value:"it"},{nativeName:"",nameToTranslate:"LANGUAGE_JAPANESE",value:"ja"},{nativeName:"",nameToTranslate:"LANGUAGE_KANNADA",value:"kn"},{nativeName:"b",nameToTranslate:"LANGUAGE_KAZAKH",value:"kk"},{nativeName:"",nameToTranslate:"LANGUAGE_KOREAN",value:"ko"},{nativeName:"Latvieu",nameToTranslate:"LANGUAGE_LATVIAN",value:"lv"},{nativeName:"Latvieu",nameToTranslate:"LANGUAGE_LITHUANIAN",value:"lt"},{nativeName:" ",nameToTranslate:"LANGUAGE_MACEDONIAN",value:"mk"},{nativeName:"Bahasa Malaysia",nameToTranslate:"LANGUAGE_MALAY",value:"ms"},{nativeName:" ()",nameToTranslate:"LANGUAGE_MALAYALAM",value:"ml"},{nativeName:"Malti",nameToTranslate:"LANGUAGE_MALTESE",value:"mt"},{nativeName:" ",nameToTranslate:"LANGUAGE_MONGOLIAN",value:"mn"},{nativeName:"Bokml",nameToTranslate:"LANGUAGE_NORWEGIAN",value:"no"},{nativeName:"",nameToTranslate:"LANGUAGE_PASHTO",value:"ps"},{nativeName:"Polski",nameToTranslate:"LANGUAGE_POLISH",value:"pl"},{nativeName:"Portugus",nameToTranslate:"LANGUAGE_PORTUGUESE",value:"pt"},{nativeName:"Portugus (Portugal)",nameToTranslate:"LANGUAGE_PORTUGUESE_PORTUGAL",value:"pt-PT"},{nativeName:"",nameToTranslate:"LANGUAGE_PUNJABI",value:"pa"},{nativeName:"Romnete",nameToTranslate:"LANGUAGE_ROMANIAN",value:"ro"},{nativeName:"",nameToTranslate:"LANGUAGE_RUSSIAN",value:"ru"},{nativeName:"",nameToTranslate:"LANGUAGE_SERBIAN_CYRILLIC",value:"sr"},{nativeName:"",nameToTranslate:"LANGUAGE_SINHALA",value:"si"},{nativeName:"Slovenina",nameToTranslate:"LANGUAGE_SLOVAK",value:"sk"},{nativeName:"Slovenina",nameToTranslate:"LANGUAGE_SLOVENIAN",value:"sl"},{nativeName:"Soomaali",nameToTranslate:"LANGUAGE_SOMALI",value:"so"},{nativeName:"Espaol",nameToTranslate:"LANGUAGE_SPANISH",value:"es"},{nativeName:"Espaol mexicano",nameToTranslate:"LANGUAGE_SPANISH_MEXICAN",value:"es-MX"},{nativeName:"Kiswahili",nameToTranslate:"LANGUAGE_SWAHILI",value:"sw"},{nativeName:"Svenska",nameToTranslate:"LANGUAGE_SWEDISH",value:"sv"},{nativeName:"Tagalog",nameToTranslate:"LANGUAGE_TAGALOG",value:"tl"},{nativeName:"",nameToTranslate:"LANGUAGE_TAMIL",value:"ta"},{nativeName:"",nameToTranslate:"LANGUAGE_TELUGU",value:"te"},{nativeName:"",nameToTranslate:"LANGUAGE_THAI",value:"th"},{nativeName:"Trke",nameToTranslate:"LANGUAGE_TURKISH",value:"tr"},{nativeName:"",nameToTranslate:"LANGUAGE_UKRAINIAN",value:"uk"},{nativeName:"",nameToTranslate:"LANGUAGE_URDU",value:"ur"},{nativeName:"U'zbek",nameToTranslate:"LANGUAGE_UZBEK",value:"uz"},{nativeName:"Ting Vit",nameToTranslate:"LANGUAGE_VIETNAMESE",value:"vi"},{nativeName:"Cymraeg",nameToTranslate:"LANGUAGE_WELSH",value:"cy"}],R=!1,_=!0,F=!0;A.selectedVersion={value:null,language:N[0].value},A.links=null,I(i.map(N,"nameToTranslate"),"LANGUAGE_OPTION").then((function(e){return i(N).each((function(t){t.currentName=e[t.nameToTranslate]})),N=N.sort((function(e,t){return e.nativeName.localeCompare(t.nativeName)})),y.all(i.map(N,(function(e){return I("LANGUAGE_AAF_DISPLAY_NAME",{native:e.nativeName,current:e.currentName})})))})).then((function(e){i.each(N,(function(t,n){t.name=e[n]})),A.availableLanguages=N})),A.platformName=(E=/[?&]platformName=([^#&]+)/.exec(window.location.href))&&E[1],A.platformUi=function(){var e=/[?&]platformUi=([^#&]+)/.exec(window.location.href);return e&&e[1]}(),A.downloadState={name:null,data:null,downloadUrl:null},A.listAlternativeFormatsDeferral=null,A.termsOfUse=null,I("TERMS_OF_USE_LEGAL_COPY").then((function(e){A.termsOfUse=e})),A.helpType="DefaultHelp",A.needExtraHelp=function(){var e;switch(A.platformName){case"Wcm":e="008_001";break;case"web":e="007_006";break;default:e="007_003"}var t=/([a-z]{2})-([a-zA-Z]{2})/;P("https://help.blackboard.com/"+e+(t.test(A.locale)?"".concat(t.exec(A.locale)[1],"_").concat(t.exec(A.locale)[2]):/^\w{2}$/.test(A.locale)?"".concat(A.locale,"_").concat(A.locale):"en_us")),r.needExtraHelp("DefaultHelp","Student")},c.setOption("openLinksInNewWindow",!0),c.setOption("headerLevelStart",3),A.openLibraryReferenceLink=function(e){P(e),r.openLibraryReferenceLink(e)},A.avTabs=[{select:function(){A.setModalView("downloadOptions")},isSelected:!0,iconClass:"ally-av-icon-download-options",spanClass:"ally-av-download-options",key:"DOWNLOAD_OPTIONS"},{select:function(){A.setModalView("libraryReference")},isSelected:!1,iconClass:"ally-av-icon-library-reference",spanClass:"ally-av-library-reference",key:"LIBRARY_REFERENCE"}],A.keydown=function(e){27===e.keyCode&&A.closeModal()},A.cancelDownload=function(e){"deferred"===A.downloadState.name&&A.downloadState.data&&A.downloadState.data.cancel(),A.downloadState.name&&r.cancelDownloadAlternativeFormat(A.selectedVersion.value),A.stateReset(e)},A.closeModal=M((function(){d.close(),A.cancelDownload(!1),A.setModalView(null),A.links=null,s(".ally-av-modal").off("click",".ally-av-help-modal-content a"),v.postIFrameMessage("hide",{type:"accessibleVersions"})})),A.stateReset=M((function(e){A.downloadState.name=null,A.downloadState.data=null,A.downloadState.downloadUrl=null,A.avTabs.forEach((function(e){return e.isSelected=!1})),A.avTabs[0].isSelected=!0,e&&j()})),A.stateDefer=M((function(e){A.downloadState.name="deferred",A.downloadState.data=e,j(),T((function(){s(".ally-av-loading").css("z-index","0")}))})),A.stateSucceed=M((function(e){A.completeDownload(e,A.contentId)})),A.stateCancel=M((function(){A.stateReset()})),A.stateFail=M((function(e){A.downloadState.name="failed",A.downloadState.data=e,401===e.code&&(A.downloadState.data.errorType="unauthorized"),j()})),A.setModalView=function(e){return A.listAlternativeFormatsDeferral&&(A.listAlternativeFormatsDeferral.cancel(),A.listAlternativeFormatsDeferral=null),A.modalView=e,j(),!1},G(),A.downloadAccessibleVersion=function(){var e=A.selectedVersion.value,t=null;"Translation"===e?t=A.selectedVersion.language:"Tts"!==e||"RichContent"!==A.selectedResource.uploadType||A.selectedDownload.url||(t=encodeURIComponent(A.selectedResource.title));var a=function(e,t){var n=["Translation","Html","Beeline"];if(-1!==n.indexOf(e)&&g.isMobileOrTablet())return!1;var a=["Wcm","web"];return-1===n.indexOf(e)||-1===a.indexOf(t)}(A.selectedVersion.value,A.platformName);r.beginDownloadAlternativeFormat(e,{formatParam:t});var o=function(e,t){if(e)return A.stateFail(e);if(t.url)return"ImmersiveReader"===A.selectedVersion.value&&A.stateDefer(t.emitter),A.completeDownload(t.url,A.contentId);var n=t.emitter;A.stateDefer(n),n.on("finished",(function(e){A.stateSucceed(e)})),n.on("error",(function(e){A.stateFail(e)}))};A.selectedDownload.AaaS?n.downloadAaasAlternativeVersion(A.selectedDownload.AaaS.contentHash,A.selectedDownload.AaaS.url,e,t,a,500,o):n.downloadAlternativeVersion(A.selectedDownload,e,t,a,500,o)},A.completeDownload=M((function(e,t){r.completeDownloadAlternativeFormat(A.selectedVersion.value),"ImmersiveReader"!==A.selectedVersion.value?(_&&"Tts"===A.selectedVersion.value&&g.isMobileOrTablet()?(A.downloadState.name="audio-player",A.downloadState.downloadUrl=h.trustAsResourceUrl(e)):(function(e,t){var n=A.selectedVersion.value,r=null;"Translation"===n&&(r=A.selectedVersion.language);var i=u[n],s=function(e){var t=new URL(e);return Object(a.d)(t.hostname.endsWith(".s3.amazonaws.com")?t.pathname:t.searchParams.get("key"),o)}(decodeURIComponent(e));!i&&s&&p[s]&&(i=p[s]);var c={extension:s,format:n,formatMimeType:i,language:r,url:e,contentId:t};v.postDownloadReadyMessage(c)}(e,t),F?A.closeModal():A.stateReset()),v.postAlternativeFormatAccessedMessage({contentId:t})):function(e){var t=e.url,n=e.tokenSupplier,a=e.availableAlternativeFormats,o=e.title,r=e.uiLang,i=e.onExit,s=e.launchAsync,c=void 0===s?d.launchAsync:s;return Object(f.b)(this,void 0,void 0,(function(){var e,s,l,u,p,d,m,v,b,g;return Object(f.e)(this,(function(f){switch(f.label){case 0:return[4,n()];case 1:return e=f.sent(),s=e.token,l=e.subdomain,[4,fetch(t)];case 2:return u=f.sent(),p=c,d=[s,l],b={},m="chunks",g={},v="content",[4,u.text()];case 3:return[2,p.apply(void 0,d.concat([(b[m]=[(g[v]=f.sent(),g.mimeType="text/html",g)],b.title=o,b),{allowFullscreen:!1,disableTranslation:0===a.filter((function(e){return"Translation"===e.id})).length,onExit:i,uiLang:r,uiZIndex:2e3}]))]}}))}))}(b(b({},A.selectedResource),{},{onExit:function(){A.stateReset(),A.$broadcast("ally-tab-ally-av-focus")},tokenSupplier:function(){return n.getImmersiveReaderAuth()},url:e,uiLang:A.locale})).then((function(){v.postAlternativeFormatAccessedMessage({contentId:t})})).catch(A.stateFail)})),A.disableAlternativeFormats=function(){var e=A.selectedResource.uploadType;t.disableAlternativeFormats(e,A.selectedResource.id).then((function(){A.setModalView("aafsDisabled")}))},A.enableAlternativeFormats=function(){var e=A.selectedResource.uploadType;t.enableAlternativeFormats(e,A.selectedResource.id).then((function(){A.setModalView("downloadOptions")}))},A.returnTermsFocus=function(){A.setModalView("downloadOptions"),setTimeout((function(){s("#terms-of-use-button button").focus()}),10)},A.sendExpertHelp=function(e){A.customHelpExpertEmailSubmitted.pending=!0,t.sendExpertHelp({id:A.selectedResource.id,name:A.selectedResource.name,type:A.selectedResource.mimeType,url:A.selectedResource.url},A.fromPageUrl,A.selectedVersion.value,e).then((function(){A.customHelpExpertEmailSubmitted.succeeded=!0})).catch((function(){A.customHelpExpertEmailSubmitted.succeeded=!1})).then((function(){A.customHelpExpertEmailSubmitted.completed=!0})),setTimeout((function(){s("#email-confirmation-content").focus()}),350)},A.customHelpBack=function(){if(A.customHelpExpertEmailSubmitted.completed&&!A.customHelpExpertEmailSubmitted.succeeded)return delete A.customHelpExpertEmailSubmitted.pending,delete A.customHelpExpertEmailSubmitted.succeeded,void delete A.customHelpExpertEmailSubmitted.completed;A.setModalView("downloadOptions"),setTimeout((function(){s("#ally-additional-help-student-button").focus()}),0)},A.selectPage=O,A.selectFile=function(e){var t,n,a;"web"===A.platformName?function(e){var t=i.find(A.links,{id:e});k(t,!0)}(e):(t=e,n=i.find(A.links,{id:t}),a=null,n&&n.title&&(a=n.title),U(t,a))},v.registerIFrameMessageCallback((function(e){"accessible-versions-show"===e.subject?L(e.data):"accessible-versions-focus"===e.subject?A.$broadcast("ally-tab-ally-av-focus"):"accessible-versions-reset"===e.subject&&A.stateReset(!1)})),v.postIFrameMessage("init",{type:"accessibleVersions"});var L=M((function(e){G("web"===A.platformName?"CHECKING_PAGE_ELLIPSIS":null),R=e.hasOpenUrlHandler;var a=e.opts;_=!1!==a.renderAudioOnMobileInline,F=!1!==a.closeWhenFormatReady,A.clientId=e.clientId,A.courseId=e.courseId,A.contentId=e.contentId,A.locale=e.opts.locale,A.fromPageUrl=e.fromPageUrl,n.init(e.clientId,e.courseId,(function(){var a,o,c,l;s(document).on("click",".ally-av-terms-of-use",(function(){A.setModalView("termsOfUse"),A.$apply()})),"web"===e.platformName?e.directFileInfo?(A.courseId="irrelevant",A.locale=e.opts.locale,A.fromPageUrl=e.fromPageUrl,A.canManageAafs=!1,A.pageProfile={},k(e.directFileInfo,!1)):function(e){t.getWebpageProfile(e.webpage).then((function(t){A.courseId=t.webpage.courseId,n.init(e.clientId,A.courseId),A.locale=e.opts.locale,A.fromPageUrl=e.fromPageUrl,A.canManageAafs=!1,A.pageProfile=t.webpage,r.config({lmsType:A.platformName,clientId:A.clientId.toString(),courseId:A.courseId,platformUi:A.platformUi}),r.listWebpageLinks();var a=i.chain(e.webpage.links).zip(t.links).map((function(e,t){return i.extend(e[1],e[0],{index:t})})).filter((function(e){return!e.failed})).filter((function(e){return 0!==e.fileType.indexOf("html")})).filter((function(e){return e.supportsAlternativeFormats})).groupBy((function(e){return e.url})).values().map((function(e){return i.chain(e).orderBy((function(e){return[e.title||"",e.text||""]})).last().value()})).sortBy("index").value();a.length>0?(A.links=a,A.setModalView("pageWithFileLinks")):(A.links=null,S())})).catch((function(e){e.code>=400&&e.code<500&&A.setModalView("aafsDisabled")}))}(e):"AaaS"===e.platformName?(A.courseId="irrelevant",A.locale=e.opts.locale,A.canManageAafs=!1,A.pageProfile={},l=e.contentInfo,t.getAaasContentReport(l.contentHash).then((function(e){A.selectedResource={id:l.contentHash,fileType:e.metadata.fileType,libraryReference:e.metadata.libraryReference,mimeType:e.metadata.mimeType,title:e.metadata.name,uploadType:"File"},A.selectedDownload={AaaS:l},C(A.selectedResource,e.formats.availableFormats,[],e.formats.canToggleAvailability),e.formats.available?A.setModalView("downloadOptions"):A.setModalView("aafsDisabled"),A.stateReset(),r.config({lmsType:A.platformName,clientId:A.clientId.toString(),courseId:A.courseId,fileId:A.selectedResource.id,fileType:A.selectedResource.fileType,platformUi:A.platformUi}),r.engageAlternativeFormat(e.formats.available),v.postIFrameMessage("active",{type:"accessibleVersions"})}))):"RichContent"===e.uploadType?(a=e.richContentId,o=e.associatedFiles,c=e.contentHash,A.canManageAafs=!1,A.contentHash=c,t.getIndividualRichContentReport(a).then((function(e){var n,i;return A.lmsRichContentReport=e,A.pageProfile=(n=e.id,i=e.metadata.name,{id:n,title:i,fileType:"html-fragment"}),e.formats.available?t.getRichContentAssociatedFiles(a,o).then((function(e){var t=e.results.filter((function(e){return e.supportsAlternativeFormats})).map((function(e){return function(e,t,n,a){return{id:e,title:t,fileType:n,description:a}}(e.externalId,e.title||e.fileName,e.fileType)}));r.config({lmsType:A.platformName,clientId:A.clientId.toString(),courseId:A.courseId,platformUi:A.platformUi}),t.length>0?(A.links=t,A.setModalView("pageWithFileLinks")):(A.links=null,O())})):(O(),void A.setModalView("aafsDisabled"))})).catch((function(e){e.code>=400&&e.code<500&&A.setModalView("aafsDisabled")}))):U(e.fileId),n.getHelp({targetGroup:"student"},(function(e,t){e||"CustomHelp"===i.get(t,"helpType","DefaultHelp")&&(A.helpType="CustomHelp",s(".ally-av-modal").on("click",".ally-av-help-modal-content a",(function(){return P(s(this).attr("href")),!1})),A.needExtraHelp=function(){A.customHelpExpertEmailSubmitted={},A.customHelp=i.get(t,["content","helpContent"],""),i.get(t,"content.expertEnabled")&&(A.customHelpExpertEmail=i.get(t,"content.expertEmail")),A.setModalView("customHelp"),r.needExtraHelp("CustomHelp","Student")})})),"canvas"!==A.platformName&&"learn"!==A.platformName||n.checkFeatureFlag("eesysoftIntegrationEnabled",(function(e,t){!e&&t&&m.appendScript(s(document).find("body")[0])}))}))}));function O(){"web"===A.platformName?S():function(){A.selectedResource={availableAlternativeFormats:A.lmsRichContentReport.formats.availableFormats,fileType:"html-fragment",id:A.pageProfile.id,mimeType:"text/html",newAlternativeFormats:A.lmsRichContentReport.formats.newAlternativeFormats,title:A.pageProfile.title,uploadType:"RichContent"},A.selectedDownload={lms:{clientId:A.clientId,contentHash:A.contentHash,courseId:A.courseId,uploadType:"RichContent",externalId:A.selectedResource.id}};var e=!0;r.config({lmsType:A.platformName,clientId:A.clientId.toString(),courseId:A.courseId,fileId:A.selectedResource.id,fileType:A.selectedResource.fileType,platformUi:A.platformUi}),r.engageAlternativeFormat(e),C(A.selectedResource,A.lmsRichContentReport.formats.availableFormats,[],A.lmsRichContentReport.formats.canToggleAvailability),A.setModalView("downloadOptions")}()}function S(){A.selectedResource={availableAlternativeFormats:null,fileType:A.pageProfile.fileType,id:A.pageProfile.id,mimeType:A.pageProfile.mimeType,newAlternativeFormats:null,title:A.pageProfile.title,uploadType:"RichContent",url:A.pageProfile.url},A.selectedDownload={url:A.pageProfile.url},r.config({lmsType:A.platformName,clientId:A.clientId.toString(),courseId:A.courseId,fileId:A.selectedResource.id,fileType:A.selectedResource.fileType,platformUi:A.platformUi,resourceUrl:A.pageProfile.url}),r.engageAlternativeFormat(!0),C(A.selectedResource,null),A.setModalView("downloadOptions")}function k(e,t){A.selectedResource={availableAlternativeFormats:null,fileType:e.fileType,href:e.href,id:e.id,mimeType:e.mimeType,newAlternativeFormats:null,text:e.text,uploadType:"File",url:t?e.url:null},A.selectedDownload={url:e.url},r.config({lmsType:A.platformName,clientId:A.clientId.toString(),courseId:A.courseId,fileId:A.selectedResource.id,fileType:A.selectedResource.fileType,platformUi:A.platformUi,resourceUrl:e.url}),r.engageAlternativeFormat(!0),C(A.selectedResource),A.setModalView("downloadOptions")}function C(t,a,o,r){if(o=o||{},A.canManageAafs=r||!1,a){if(t.availableAlternativeFormats=i.chain(a).sortBy((function(e){var t=i.indexOf(l,e);return-1===t?l.length:t})).filter((function(e){return!o[e]})).map((function(t){return{id:t,readableFormat:e.translateAlternativeVersion(t)}})).value(),!i.isEmpty(t.availableAlternativeFormats)){var c=A.selectedVersion.value;c&&i.chain(t.availableAlternativeFormats).map("id").includes(c).value()||(A.selectedVersion.value=i.first(t.availableAlternativeFormats).id)}j()}else T((function(){s(".ally-av-loading").css("z-index","0")})),n.listAvailableFormats(A.selectedDownload,500,(function(e,n){if(e)return A.stateFail(e);if(n.formats)return A.selectedResource.libraryReference=n.libraryReference,A.selectedResource.newAlternativeFormats=n.newAlternativeFormats,A.$apply((function(){C(t,n.formats,o)}));var a=n.emitter;a.on("finished",(function(e){A.$apply((function(){A.selectedResource.libraryReference=e.libraryReference,A.selectedResource.newAlternativeFormats=e.newAlternativeFormats,C(t,e.formats,o)}))})),a.on("error",(function(e){A.stateFail(e)})),A.listAlternativeFormatsDeferral=a}))}function U(e,n){t.getIndividualFileReport(e).then((function(t){A.selectedResource={id:e,fileType:t.metadata.fileType,libraryReference:t.metadata.libraryReference,mimeType:t.metadata.mimeType,newAlternativeFormats:t.formats.newAlternativeFormats,title:n||t.metadata.name,uploadType:"File"},A.selectedDownload={lms:{clientId:A.clientId,courseId:A.courseId,uploadType:"File",externalId:A.selectedResource.id}},!i.chain(t).get("metadata.libraryReference.url").isEmpty().value()&&!A.selectedResource.libraryReference.url.match(/^https?:\/\//)&&(A.selectedResource.libraryReference.url="http://".concat(A.selectedResource.libraryReference.url)),C(A.selectedResource,t.formats.availableFormats,[],t.formats.canToggleAvailability),t.formats.available?A.setModalView("downloadOptions"):A.setModalView("aafsDisabled"),A.stateReset(),r.config({lmsType:A.platformName,clientId:A.clientId.toString(),courseId:A.courseId,fileId:A.selectedResource.id,fileType:A.selectedResource.fileType,platformUi:A.platformUi}),r.engageAlternativeFormat(t.formats.available),v.postIFrameMessage("active",{type:"accessibleVersions"})}))}function j(){A.$broadcast("ally-tab-ally-av-focus")}function G(e){A.loadingTitle=e||"DOWNLOAD_ALTERNATIVE_FORMATS",A.setModalView("loading"),T((function(){s(".ally-av-loading").css("z-index","0")}))}function P(e){R?v.postIFrameMessage("openUrl",{url:e}):w.open(e,"_blank","noopener")}function M(e){return function(){var t=this,n=Array.prototype.slice.call(arguments);A.$$phase?e.apply(t,n):A.$apply((function(){e.apply(t,n)}))}}}])},function(e,t,n){"use strict";n.r(t);n(82),n(84),n(85);var a=n(0),o=n(78),r=n(14),i=n(86);i.module("ally.templates",[]),Object(r.c)(i),n(88);var s=n(235).AppModule;Object(a.ub)(),Object(o.a)().bootstrapModule(s).catch((function(e){console.error("An error occurred bootstrapping the Ally app:"),console.error(e.message),console.error(e.stack)}))},function(e,t,n){"use strict";n.r(t);var a=n(7),o="https://help.blackboard.com";!function(e){function t(){var e=document.location.search.substr(1).split("&").map((function(e){return e.split("=")})).filter((function(e){return"locale"===e[0]}))[0];return void 0!==e?e[1]:null}function n(){return navigator.languages&&navigator.languages.length>0?navigator.languages[0]:navigator.language||navigator.userLanguage}function r(e){var t=e.replace(/-/g,"_").split("_"),n=t[0].toLowerCase();return t.length>1&&(n+="_".concat(t[1].toUpperCase())),t.length>2&&(n+="_".concat(t.slice(2).join("_"))),n}function i(e){return s(e).toLowerCase()}function s(e){var t=e.split(/[-_]/),n=[];return n.push(t[0].toLowerCase()),t[1]&&n.push(t[1].toUpperCase()),n.join("-")}e.module("ally").service("allyI18nUtils",["$translate","allyI18nDefaultLocale",function(e,r){var c=["ar","he"];function l(){var a,o=e.preferredLanguage();return{direction:-1!==c.indexOf(o)?"rtl":"ltr",language:o,locale:s((a=r,t()||n()||a))}}return{getInfo:l,getBlackBoardHelpUrl:function(e){return function(e,t,n){if(!t)return""+o+Object(a.c)(Object(a.d)(n,(function(e){return"/"+e+"/"})),"/")+e;var r=o+"/"+e,i=/([a-z]{2})-([a-zA-Z]{2})/.exec(n);return Object(a.b)(i)?""+r+i[1]+"_"+i[2]:/^\w{2}$/.test(n)?""+r+n+"_"+n:r+"en_US"}(e,!(arguments.length>1&&void 0!==arguments[1])||arguments[1],l().locale)},toAngularLocale:i,toBcp47:s}}]),e.module("ally").config(["allyI18nSupportedLocales","allyI18nDefaultLocale","$translateProvider","tmhDynamicLocaleProvider",function(e,a,o,s){var c=function(e,a){var o=r(t()||n()||a),i=o.split("_")[0];if(-1!==e.indexOf(o))return o;if(-1!==e.indexOf(i))return i;var s=function(e,t){var n=e.filter((function(e){return e.split("_")[0]===t}));return 1===n.length?n[0]:null}(e,i);return s||r(a)}(e,a),l=i(c);s.localeLocationPattern("/angular-i18n/angular-locale_{{locale}}.js"),s.defaultLocale(l),o.useLoader("i18nFactory"),o.useSanitizeValueStrategy("escapeParameters"),o.preferredLanguage(c),o.fallbackLanguage("en")}])}(window.angular)},function(e,t,n){"use strict";n.r(t),n.d(t,"isAltTextMeaningful",(function(){return u})),n.d(t,"isTextSpecified",(function(){return p})),n.d(t,"isTextAFileName",(function(){return f})),n.d(t,"isTextTheFileName",(function(){return d})),n.d(t,"getRoundedScore",(function(){return m})),n.d(t,"getHighChartFriendlyScore",(function(){return v}));var a=/[\s!@#$%^&*\(\)_+=-\[\]\{\};':"<>\?,\\.\/-]/g,o=/^[a-zA-Z]{1,6}:[/\\][a-zA-Z0-9\-\._~:\\/?#\[\]@!$&'\(\)\*\+,;=% ]*$/g,r=/^.*\.[a-zA-Z]{3,4}$/g,i="::ally::",s=new RegExp(i,"g");var c="data-ally-user-updated-",l=function(){function e(){}return e.getAttributeMap=function(t){var n,a,o,r,i=e.splitFragment(t);if(void 0!==i.preFragment&&null!==(a=null===(n=i.fragment)||void 0===n?void 0:n.includes(c))&&void 0!==a&&a){var s=null!==(r=null===(o=i.fragment)||void 0===o?void 0:o.split("&amp;"))&&void 0!==r?r:[];return new Map(s.filter((function(e){return e.includes(c)})).map((function(e){var t=e.split("=");return[t[0].replace(c,""),t.length>1?decodeURIComponent(t[1]):""]})))}return new Map},e.splitFragment=function(e){var t=e.split("&#").join(i).split(/#/).map((function(e){return e.replace(s,"&#")}));return 1===t.length?{preFragment:t[0]}:2===t.length?{fragment:t[1],preFragment:t[0]}:{error:"Could not parse fragment"}},e.isDefaultDescription=function(e,t){var n=this.normalizeFileName(e).trim(),a=this.normalizeFileName(null!=t?t:"").trim(),o=this.normalizeFileName(this.baseName(this.sanitize(null!=t?t:""))).trim();return 0===n.length||this.isUrlToFile(e)||this.isFileName(e)||a===n||o===n},e.normalizeFileName=function(e){return this.sanitize(e.trim().toLowerCase()).replace(a,"")},e.sanitize=function(e){return e.replace(/\u0000/g,"").replace(/\uFEFF/g,"")},e.basePath=function(e){return e.substr(Math.max(e.lastIndexOf("\\"),e.lastIndexOf("/"))+1)},e.baseName=function(e){var t=this.basePath(e),n=t.lastIndexOf(".");return-1===n?t:t.substring(0,n)},e.isUrlToFile=function(e){return null!==e.trim().match(o)},e.isFileName=function(e){return null!==e.trim().match(r)},e}();function u(e,t){var n=p(e),a=f(e),o=d(e,t);return n&&!a&&!o}function p(e){return!(!e||!e.trim())}function f(e){if(e){var t=e.trim().toLowerCase();return l.isUrlToFile(t)||l.isFileName(t)}return!1}function d(e,t){if(e&&t){var n=l.normalizeFileName(e),a=l.normalizeFileName(t),o=l.normalizeFileName(l.baseName(l.sanitize(t))).trim();return a===n||o===n}return!1}function m(e){return e=e||0,Math.round(1e3*e)/10}function v(e){const t=m(e);return 0!==t?t:null}}],[[81,1,2]]]);
//# sourceMappingURL=../../main.7f8e34d582fc8793fe37.js.map